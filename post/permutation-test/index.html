<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Analyzing Disparity Between Users and Journalists Ratings | Mostafa Touny</title>
<meta name="keywords" content="">
<meta name="description" content="Randomized Shuffling As My First Systematic Analysis">
<meta name="author" content="">
<link rel="canonical" href="https://www.mostafatouny.github.io/post/permutation-test/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e6ee52f0fc7c2e3dbd78858fc1b3e06fb86a3c6ee38d351342e06e23a24d02d6.css" integrity="sha256-5u5S8Px8Lj29eIWPwbPgb7hqPG7jjTUTQuBuI6JNAtY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.mostafatouny.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.mostafatouny.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.mostafatouny.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.mostafatouny.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.mostafatouny.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://www.mostafatouny.github.io/post/permutation-test/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Analyzing Disparity Between Users and Journalists Ratings" />
<meta property="og:description" content="Randomized Shuffling As My First Systematic Analysis" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.mostafatouny.github.io/post/permutation-test/" />
<meta property="og:image" content="https://www.mostafatouny.github.io/featured.png" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-03-06T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-03-06T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.mostafatouny.github.io/featured.png" />
<meta name="twitter:title" content="Analyzing Disparity Between Users and Journalists Ratings"/>
<meta name="twitter:description" content="Randomized Shuffling As My First Systematic Analysis"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "",
      "item": "https://www.mostafatouny.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Analyzing Disparity Between Users and Journalists Ratings",
      "item": "https://www.mostafatouny.github.io/post/permutation-test/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Analyzing Disparity Between Users and Journalists Ratings",
  "name": "Analyzing Disparity Between Users and Journalists Ratings",
  "description": "Randomized Shuffling As My First Systematic Analysis",
  "keywords": [
    
  ],
  "articleBody": "Intro In this post we analyze and compare metacritic ratings of best 2019 games, Given by both the gaming community and professional journalism. It is divided into three sections, namely, data preprocessing, exploratory analysis, and systematic test. I launched a similar post upto exploratory analysis on this Reddit post. Surprisingly, The community shared with me great insights and feedbacks. If you have already seen my notebook on reddit’s post, Then skip to systematic test. There is a summary of each section if you’re lazy to read the whole kernel. Check summaries out in table of contents below. On the other extreme, If you are willing to read every detail of the kernel, I provided for you the full sourcecode used in this blog post here.\nIn a nutshell, The goal of this blog post is:\nAnalyzing top games got high ratings from professional critics but not from community of users. Analyzing top games got high ratings from community of users but not from progessional critics. Graph of percentage of games whose disparity between critics and users are low, moderate, or high. Do above steps on four platforms, namely, PS4, Xbox One, Switch, and PC. Then we compare them. Apply permutation and p-values systematic test on each platforms pairs distributions. What I Have Learned From Reddit Community In this paragraph I shall highlight and review reddit’s community comments which I found most useful. I am going to just quote the user’s name, and summarize his comment. To see his full comment, just CTRL+F his name on reddit’s page. After each summary, I spot what I learned, and how analysis could be furtherly improved according to it. However, None of these spots are implemented here.\nArtKorvalay A gamer who dislikes a game but finds no outrage from the community does not add up his voice. A gamer who moderates a game but finds an outrage from the community adds up a negative voice\nWe could consider ratings along whether the game is hyped or outraged from the community. In that way, we might reach more accurate analysis.\nArtKorvalay Some games like disco elsiym gets played by only those who like such genre of games. A humble 2d-graphics like this shall not be played by any casual gamer who gets attracted by marketing and high graphics. So, a gamer who chooses to play it must be a fan of that style. As a result, the game got rated only by those who like it. Hence, ratings are biased.\nWe could consider ratings along whether a game’s marketing budget is high or low. In that way, we might reach more accurate analysis.\nEoceneMiacid Terminator Resistance case study is typical for disparity between users and critics. Have a look here how the problem was highlighted by media.\nExploring this case study might reveal new insights as it is typical of the problem of disparity between users and professional critics. We might test our new techniques on this case study and see how our techniques perform up against it. Testing analysis techniques on a case we already know about emphatically shall help us on detecting mistakes in our analysis.\nTable of Contents Preface\nPreface What I Have Learned From Reddit Community Data Preprocessing\nImport Libraries and Local Files Read Data Data Cleansing Data Preprocessing Summary Exploratory Analysis\nCompute Disparity (Difference) Between Users and Critics Discretize Disparity Computed Earlier Into Categories Sort According to Disparity Between Users and Critics Basic Stats on Disparity Between Users and Critics Graphing Disparity Between Users and Critics Maximum Disparity Between Users and Critics Ratings Minimum Disparity Between Users and Critics Games Which Got Higher Ratings From Users Than From Critics Exploratoy Analysis Summary Systematic Test\nA Single Permutation Shuffle Based Trial With Histogram \u0026 Probability Density Function Permutation Test and P-Value Based Statistical Significance Systematic Test Summary Import Libraries and Local Files # 3rd-party libraries import numpy as np import pandas as pd import matplotlib.pyplot as plt # local-files import jsonRW as jsRW import graphs.pie as pieGraph import graphs.categoricalHeatmap as categoricalHeatmapGraph import graphs.groupedBars as groupedBarsGraph import graphs.histogramPdf as histogramPdfGraph import transformations.transformations as transform import transformations.discretizeIntoCategories as discIntCat import statTests.permutationTest as permTest Read Data Read Local JSON Data Into a Pandas Dataframe # a map from each platform to its corresponding dataframe platform_df = {} # platform names and their corresonding data file names platformsNames = ['ps4', 'xbox', 'switch', 'pc'] filesNames = ['ps4.csv', 'xbox.csv', 'switch.csv', 'pc.csv'] # for each platform, then for name in platformsNames: # read its local json file metacritic_list = jsRW.readJson(name) # parse it as pandas dataframe, then map platform name to it platform_df[name] = pd.DataFrame(metacritic_list) # take a look at a dataframe platform_df['ps4'] .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Data Cleansing # drop unneeded columns and re-organize them for name in platformsNames: platform_df[name] = platform_df[name][['title', 'user_rating', 'critic_rating']] # take a look at a dataframe, again platform_df['ps4'] .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } remarks user_rating must be on the same scale as critic_rating data types need to be checked # check columns data types platform_df['ps4'].dtypes title object user_rating object critic_rating object dtype: object # convert ratings into a numeric value # error ahead! #df['user_rating'] = pd.to_numeric(df['user_rating']) #df['critic_rating'] = pd.to_numeric(df['critic_rating']) # get rid of user_rating with value equal to \"tbd\" # for each platform for name in platformsNames: # get its dataframe df = platform_df[name] # get index set in which user_rating is tbd, a non-numeric value tbdIndex = df[df['user_rating']==\"tbd\"].index # drop rows specified by indices in which user_rating is tbd df = df.drop(labels=tbdIndex, axis='index') # set updated data to platform_df platform_df[name] = df # convert ratings to a numeric type # for each platform for name in platformsNames: # get its dataframe df = platform_df[name] # convert to a numeric type df['user_rating'] = pd.to_numeric(df['user_rating']) df['critic_rating'] = pd.to_numeric(df['critic_rating']) # set updated data to platform_df platform_df[name] = df # check data types platform_df['ps4'].dtypes title object user_rating float64 critic_rating int64 dtype: object # user ratings must be on the same scale as critics ratings, so we multiply them by 10 # for each platform for platformName in platform_df: platform_df[platformName]['user_rating'] = platform_df[platformName]['user_rating'] * 10 platform_df['ps4'] .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Optional: Store Cleaned Data Into a CSV File \"\"\" # store data to a csv file # for each platform for platformName in platform_df: # save to a csv file platform_df[platformName].to_csv(str(platformName)+'.csv') \"\"\" \"\\n# store data to a csv file\\n\\n# for each platform\\nfor platformName in platform_df:\\n # save to a csv file\\n platform_df[platformName].to_csv(str(platformName)+'.csv')\\n\" Data Preprocessing Summary Data stored as JSON format are transformed into csv Unneded columns are dropped Suitable data types are recognized by pandas Compute Disparity (Difference) Between Users and Critics # for each platform for name in platform_df: # get dataframe of the platform df = platform_df[name] # for each record, compute distance between user and critic ratings, then set result to a new column df['userCritic_difference'] = df.apply(lambda x: abs(x['user_rating']-x['critic_rating']), axis=1) # assign updates back to our dataframe platform_df[name] = df platform_df['ps4'] .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Discretize Disparity Computed Earlier Into Categories # categories names and their corresponding intervals # category at location x corresponds to interval equal or greater than intervals location x and less than location x + 1 # except for last category, has no end categories = pd.Series([\"low\", \"moderate\", \"high\", \"very_high\", \"extremely_high\"]) intervals_categories = [0, 20, 30, 40, 50] # compute categories as defined earlier # loop on platforms for platformName in platform_df: # get dataframe of the platform df = platform_df[platformName] # add category based on difference just defined df['difference_category'] = df.apply(discIntCat.numToCat, axis=1, args=('userCritic_difference', categories, intervals_categories)) # let categories be recognized by pandas df['difference_category'] = df['difference_category'].astype(\"category\") # re-order categories df['difference_category'] = df['difference_category'].cat.set_categories(categories, ordered=True) # assign back to our dataframe platform_df[platformName] = df # take a look after our new columns added platform_df['ps4'] .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Sort According to Disparity Between Users and Critics # for each platform for platformName in platform_df: # get platform dataframe df = platform_df[platformName] # sort it by userCritic_difference df = df.sort_values(axis=0, by='userCritic_difference', ascending=False) # assign sorted dataframe back to our dataframe platform_df[platformName] = df Basic Stats on Disparity Between Users and Critics # for each platform for platformName in platform_df: # print platform name print(\"\\n\", \"on \", platformName) # show basic stat print(platform_df[platformName]['userCritic_difference'].describe()) on ps4 count 310.000000 mean 15.893548 std 13.074530 min 0.000000 25% 5.000000 50% 12.000000 75% 23.000000 max 69.000000 Name: userCritic_difference, dtype: float64 on xbox count 186.000000 mean 14.801075 std 13.192881 min 0.000000 25% 5.000000 50% 11.000000 75% 21.000000 max 69.000000 Name: userCritic_difference, dtype: float64 on switch count 364.000000 mean 6.876374 std 8.741062 min 0.000000 25% 1.750000 50% 4.000000 75% 9.000000 max 58.000000 Name: userCritic_difference, dtype: float64 on pc count 327.000000 mean 13.547401 std 12.322982 min 0.000000 25% 4.000000 50% 10.000000 75% 19.000000 max 63.000000 Name: userCritic_difference, dtype: float64 Categories Size Platform x Category 2D Sizes Dataframe platform_category_size = transform.map_columnCount(platform_df, 'difference_category') platform_category_size .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Category x Platform 2D Sizes Dataframe category_platform_size = platform_category_size.transpose() category_platform_size .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } category_platform_size.loc['low', 'ps4'] 211 Graphing Disparity Between Users and Critics Pie Graph for columnName in category_platform_size: platSeries = category_platform_size[columnName] platName = platSeries.name pieGraph.showPieGraph(platSeries, platName + ' categories percentages', 6, 6) Grouped Bar groupedBarsGraph.showGroupedBars(platform_category_size, platformsNames, 'categories size', 'categories size by platform') Categorical Heatmap categoricalHeatmapGraph.showCategoricalHeatmap(8, 8, category_platform_size, \"categories sizes among platforms\") Maximum Disparity Between Users and Critics Ratings platform_df['ps4'].head(20) .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } platform_df['xbox'].head(20) .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } platform_df['pc'].head(20) .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } platform_df['switch'].head(20) .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } def searchforTitleInPlatform(platformStr_in, game_in): tem_df = platform_df[platformStr_in][platform_df[platformStr_in]['title'] == game_in] if len(tem_df) == 1: return tem_df.iloc[0] elif len(tem_df) == 0: return -1 else: raise ValueError(\"unexpected no of games found\") searchforTitleInPlatform('xbox', \"hitman hd enhanced collection\") title hitman hd enhanced collection user_rating 46 critic_rating 66 userCritic_difference 20 difference_category moderate Name: 187, dtype: object Minimum Disparity Between Users and Critics platform_df['ps4'].tail(20) .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Games Which Got Higher Ratings From Users Than From Critics def higherUserRatings(platform_in): return platform_df[platform_in][platform_df[platform_in]['user_rating'] \u003e platform_df[platform_in]['critic_rating']].head(10) higherUserRatings('pc') .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Exploratoy Analysis Summary NBA, Fifa, Madden, COD: modern warefare games are on top of nearly all platforms lists of maximum disparity between users and professional critics Star Wars Jedi: Fallen Order got zero disparity between users and professional critics ratings Left Alive is the most praised game by the community not appreciated by professional critics Switch games got much lower percentage of high and moderate disparity Switch games got a mean of 7 disparity, nearly half of other platforms’ disparity which got about 14 A Single Permutation Shuffle Based Trial With Histogram \u0026 Probability Density Function We compare platforms distributions through permutation-test. It is a more systematic approach than relying upon intuition of visualizing and comparing distributions. Given two platforms, We concatenate them into one group. That group’s elements are randomly shuffled. Then we divide the group into new two groups. We compare the two distributions of the new two groups and assess whether the insight is still present as in the case of the two original groups of platforms. If the insight is not present in the two new groups, then that would count an evidence on behalf of our hypothesis. That is, The insight (difference in distribution) of original distributions is attributed to the two platforms. In addition, We consider average a p-value of a distribution and utilize it in our test. In Next section, We apply this method iteratively.\nEnsure Series Data are Ascendingly Ordered print(platform_df['ps4']['userCritic_difference']) print(\"\") print(platform_df['switch']['userCritic_difference']) 93 69.0 82 68.0 116 60.0 79 52.0 172 51.0 ... 198 0.0 330 0.0 214 0.0 76 0.0 56 0.0 Name: userCritic_difference, Length: 310, dtype: float64 240 58.0 66 55.0 94 51.0 416 43.0 123 42.0 ... 443 0.0 89 0.0 106 0.0 53 0.0 208 0.0 Name: userCritic_difference, Length: 364, dtype: float64 PS4 Distribution histogramPdfGraph.showHistPdf(platform_df['ps4']['userCritic_difference'], 30, '#e3e2e2', 'black', 'disparity', 'ps4', 10, 8) Average of PS4’s Disparity platform_df['ps4']['userCritic_difference'].mean() 15.893548387096773 Switch Distribution histogramPdfGraph.showHistPdf(platform_df['switch']['userCritic_difference'], 30, '#e3e2e2', 'black', 'disparity', 'switch', 10, 8) Average of Switch Disparity platform_df['switch']['userCritic_difference'].mean() 6.876373626373627 Conclusion The difference between ps4 and switch distributions is notable The difference between ps4 and switch means is about 9 Concatenate Both PS4 and Switch bothGroups = pd.concat([platform_df['switch']['userCritic_difference'], platform_df['ps4']['userCritic_difference']]) Shuffle and Divide # permutation based shuffling rng = np.random.default_rng() bothGroups = rng.permutation(bothGroups) # divide into two groups firstGroup = bothGroups[:int(len(bothGroups)/2)] secondGroup = bothGroups[int(len(bothGroups)/2):] First Group Distribution histogramPdfGraph.showHistPdf(firstGroup, 30, '#e3e2e2', 'black', 'disparity', 'first group', 10, 8) First Group Average firstGroup.mean() 11.0 Second Group Distribution histogramPdfGraph.showHistPdf(secondGroup, 30, '#e3e2e2', 'black', 'disparity', 'second group', 10, 8) Second Group Average secondGroup.mean() 11.047477744807122 Conclusion The difference between first and second groups distributions is not notable alike ps4 and switch The difference between first and second groups means is much less than disparity between ps4 and switch distributions Permutation Test and P-Value Based Statistical Significance We apply the above method iteratively. The more tests, The more confident we are of our hypothesis. That is, The pattern of two distributions is attributed to the difference in two platforms.\n# computes average of a list def avgOfList(list_in): return pd.Series(list_in).mean() # loop on pairs of platforms for idx, platformName in enumerate(platformsNames): for idx_, platformName_ in enumerate(platformsNames): # compare only unique pairs if idx_ \u003e idx: # print pairs of platforms which are compared print(platformName, platformName_) # apply test for 25 iterations on first and second platforms of the nested loop testResults = permTest.permutationTest(25, platform_df[platformName]['userCritic_difference'], platform_df[platformName_]['userCritic_difference']) # print results average print(avgOfList(testResults)) print(\"\") ps4 xbox 0.6639999999999998 ps4 switch 8.21812431561929 ps4 pc 1.5160265239233675 xbox switch 7.010956187898123 xbox pc 0.5826510174543579 switch pc 6.286296818538614 Conclusion switch has greatest statistical significance in comparison with other platforms Systematic Test Summary For ps4 and switch, The difference between distributions and means is notable For the two randomly generated, through shuffling, groups, The difference between distributions and means is not notable alike original ps4 and switch The disappearance of noted pattern in the two randomly generated groups counts as an evidence of our hypothesis. That is, the pattern (difference) of switch and ps4 distributions is attributed to platforms factor. Switch has greatest statistical significance in comparison with other platforms ",
  "wordCount" : "2443",
  "inLanguage": "en",
  "image":"https://www.mostafatouny.github.io/featured.png","datePublished": "2020-03-06T00:00:00Z",
  "dateModified": "2020-03-06T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.mostafatouny.github.io/post/permutation-test/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Mostafa Touny",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.mostafatouny.github.io/favicon.ico"
    }
  }
}
</script>

    
    
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [ ['$$', '$$'], ['\\[', '\\]'] ],  
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ]      
    }
  };
</script>

    
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.mostafatouny.github.io/" accesskey="h" title="Mostafa Touny (Alt + H)">Mostafa Touny</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.mostafatouny.github.io/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://www.mostafatouny.github.io/post" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Analyzing Disparity Between Users and Journalists Ratings
    </h1>
    <div class="post-meta"><span title='2020-03-06 00:00:00 +0000 UTC'>March 6, 2020</span>

</div>
  </header> 
<figure class="entry-cover">
        <img loading="eager" srcset="https://www.mostafatouny.github.io/post/permutation-test/featured_hu7941271700886418748.png 360w ,https://www.mostafatouny.github.io/post/permutation-test/featured_hu2286911248799658548.png 480w ,https://www.mostafatouny.github.io/post/permutation-test/featured_hu16995637481187464307.png 720w ,https://www.mostafatouny.github.io/post/permutation-test/featured.png 770w" 
            sizes="(min-width: 768px) 720px, 100vw" src="https://www.mostafatouny.github.io/post/permutation-test/featured.png" alt="" 
            width="770" height="480">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#intro" aria-label="Intro">Intro</a></li>
                <li>
                    <a href="#what-i-have-learned-from-reddit-community" aria-label="What I Have Learned From Reddit Community">What I Have Learned From Reddit Community</a></li>
                <li>
                    <a href="#table-of-contents" aria-label="Table of Contents">Table of Contents</a><ul>
                        
                <li>
                    <a href="#import-libraries-and-local-files" aria-label="Import Libraries and Local Files">Import Libraries and Local Files</a></li></ul>
                </li>
                <li>
                    <a href="#read-data" aria-label="Read Data">Read Data</a><ul>
                        
                <li>
                    <a href="#read-local-json-data-into-a-pandas-dataframe" aria-label="Read Local JSON Data Into a Pandas Dataframe">Read Local JSON Data Into a Pandas Dataframe</a></li></ul>
                </li>
                <li>
                    <a href="#data-cleansing" aria-label="Data Cleansing">Data Cleansing</a><ul>
                        <ul>
                        
                <li>
                    <a href="#remarks" aria-label="remarks">remarks</a></li></ul>
                    
                <li>
                    <a href="#optional-store-cleaned-data-into-a-csv-file" aria-label="Optional: Store Cleaned Data Into a CSV File">Optional: Store Cleaned Data Into a CSV File</a></li>
                <li>
                    <a href="#data-preprocessing-summary" aria-label="Data Preprocessing Summary">Data Preprocessing Summary</a></li>
                <li>
                    <a href="#compute-disparity-difference-between-users-and-critics" aria-label="Compute Disparity (Difference) Between Users and Critics">Compute Disparity (Difference) Between Users and Critics</a></li>
                <li>
                    <a href="#discretize-disparity-computed-earlier-into-categories" aria-label="Discretize Disparity Computed Earlier Into Categories">Discretize Disparity Computed Earlier Into Categories</a></li>
                <li>
                    <a href="#sort-according-to-disparity-between-users-and-critics" aria-label="Sort According to Disparity Between Users and Critics">Sort According to Disparity Between Users and Critics</a></li>
                <li>
                    <a href="#basic-stats-on-disparity-between-users-and-critics" aria-label="Basic Stats on Disparity Between Users and Critics">Basic Stats on Disparity Between Users and Critics</a></li></ul>
                </li>
                <li>
                    <a href="#categories-size" aria-label="Categories Size">Categories Size</a><ul>
                        
                <li>
                    <a href="#platform-x-category-2d-sizes-dataframe" aria-label="Platform x Category 2D Sizes Dataframe">Platform x Category 2D Sizes Dataframe</a></li>
                <li>
                    <a href="#category-x-platform-2d-sizes-dataframe" aria-label="Category x Platform 2D Sizes Dataframe">Category x Platform 2D Sizes Dataframe</a></li></ul>
                </li>
                <li>
                    <a href="#graphing-disparity-between-users-and-critics" aria-label="Graphing Disparity Between Users and Critics">Graphing Disparity Between Users and Critics</a><ul>
                        
                <li>
                    <a href="#pie-graph" aria-label="Pie Graph">Pie Graph</a></li>
                <li>
                    <a href="#grouped-bar" aria-label="Grouped Bar">Grouped Bar</a></li>
                <li>
                    <a href="#categorical-heatmap" aria-label="Categorical Heatmap">Categorical Heatmap</a></li>
                <li>
                    <a href="#maximum-disparity-between-users-and-critics-ratings" aria-label="Maximum Disparity Between Users and Critics Ratings">Maximum Disparity Between Users and Critics Ratings</a></li>
                <li>
                    <a href="#minimum-disparity-between-users-and-critics" aria-label="Minimum Disparity Between Users and Critics">Minimum Disparity Between Users and Critics</a></li>
                <li>
                    <a href="#games-which-got-higher-ratings-from-users-than-from-critics" aria-label="Games Which Got Higher Ratings From Users Than From Critics">Games Which Got Higher Ratings From Users Than From Critics</a></li>
                <li>
                    <a href="#exploratoy-analysis-summary" aria-label="Exploratoy Analysis Summary">Exploratoy Analysis Summary</a></li></ul>
                </li>
                <li>
                    <a href="#a-single-permutation-shuffle-based-trial-with-histogram--probability-density-function" aria-label="A Single Permutation Shuffle Based Trial With Histogram &amp; Probability Density Function">A Single Permutation Shuffle Based Trial With Histogram &amp; Probability Density Function</a><ul>
                        
                <li>
                    <a href="#ensure-series-data-are-ascendingly-ordered" aria-label="Ensure Series Data are Ascendingly Ordered">Ensure Series Data are Ascendingly Ordered</a></li>
                <li>
                    <a href="#ps4-distribution" aria-label="PS4 Distribution">PS4 Distribution</a></li>
                <li>
                    <a href="#average-of-ps4s-disparity" aria-label="Average of PS4&rsquo;s Disparity">Average of PS4&rsquo;s Disparity</a></li>
                <li>
                    <a href="#switch-distribution" aria-label="Switch Distribution">Switch Distribution</a></li>
                <li>
                    <a href="#average-of-switch-disparity" aria-label="Average of Switch Disparity">Average of Switch Disparity</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a></li>
                <li>
                    <a href="#concatenate-both-ps4-and-switch" aria-label="Concatenate Both PS4 and Switch">Concatenate Both PS4 and Switch</a></li>
                <li>
                    <a href="#shuffle-and-divide" aria-label="Shuffle and Divide">Shuffle and Divide</a></li>
                <li>
                    <a href="#first-group-distribution" aria-label="First Group Distribution">First Group Distribution</a></li>
                <li>
                    <a href="#first-group-average" aria-label="First Group Average">First Group Average</a></li>
                <li>
                    <a href="#second-group-distribution" aria-label="Second Group Distribution">Second Group Distribution</a></li>
                <li>
                    <a href="#second-group-average" aria-label="Second Group Average">Second Group Average</a></li>
                <li>
                    <a href="#conclusion-1" aria-label="Conclusion">Conclusion</a></li></ul>
                </li>
                <li>
                    <a href="#permutation-test-and-p-value-based-statistical-significance" aria-label="Permutation Test and P-Value Based Statistical Significance">Permutation Test and P-Value Based Statistical Significance</a><ul>
                        
                <li>
                    <a href="#conclusion-2" aria-label="Conclusion">Conclusion</a></li>
                <li>
                    <a href="#systematic-test-summary" aria-label="Systematic Test Summary">Systematic Test Summary</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="intro">Intro<a hidden class="anchor" aria-hidden="true" href="#intro">#</a></h2>
<p>In this post we analyze and compare <a href="https://www.metacritic.com/browse/games/score/metascore/year/ps4/filtered?year_selected=2019">metacritic ratings of best 2019 games</a>, Given by both the gaming community and professional journalism. It is divided into three sections, namely, <em>data preprocessing</em>, <em>exploratory analysis</em>, and <em>systematic test</em>. I launched a similar post upto <em>exploratory analysis</em> on <a href="https://www.reddit.com/r/truegaming/comments/ez7oc2/analysing_top_praised_games_by_the_community_not/">this Reddit post</a>. Surprisingly, The community shared with me great insights and feedbacks. If you have already seen my notebook on <em>reddit&rsquo;s post</em>, Then skip to <em>systematic test</em>. There is a summary of each section if you&rsquo;re lazy to read the whole kernel. Check summaries out in <em>table of contents</em> below. On the other extreme, If you are willing to read every detail of the kernel, I provided for you the full sourcecode used in this blog post <a href="https://github.com/mostafatouny/disparity-blog-post">here</a>.</p>
<p>In a nutshell, The goal of this blog post is:</p>
<ul>
<li>Analyzing top games got high ratings from professional critics but not from community of users.</li>
<li>Analyzing top games got high ratings from community of users but not from progessional critics.</li>
<li>Graph of percentage of games whose disparity between critics and users are low, moderate, or high.</li>
<li>Do above steps on four platforms, namely, PS4, Xbox One, Switch, and PC. Then we compare them.</li>
<li>Apply permutation and p-values systematic test on each platforms pairs distributions.</li>
</ul>
<h2 id="what-i-have-learned-from-reddit-community">What I Have Learned From Reddit Community<a hidden class="anchor" aria-hidden="true" href="#what-i-have-learned-from-reddit-community">#</a></h2>
<p>In this paragraph I shall highlight and review reddit&rsquo;s community comments which I found most useful. I am going to just quote the user&rsquo;s name, and summarize his comment. To see his full comment, just <code>CTRL+F</code> his name on reddit&rsquo;s page. After each summary, I spot what I learned, and how analysis could be furtherly improved according to it. However, None of these spots are implemented here.</p>
<blockquote>
<p><strong>ArtKorvalay</strong>
A gamer who dislikes a game but finds no outrage from the community does not add up his voice. A gamer who moderates a game but finds an outrage from the community adds up a negative voice</p>
</blockquote>
<p>We could consider ratings along whether the game is hyped or outraged from the community. In that way, we might reach more accurate analysis.</p>
<blockquote>
<p><strong>ArtKorvalay</strong>
Some games like <em>disco elsiym</em> gets played by only those who like such genre of games. A humble 2d-graphics like this shall not be played by any casual gamer who gets attracted by marketing and high graphics. So, a gamer who chooses to play it must be a fan of that style. As a result, the game got rated only by those who like it. Hence, ratings are biased.</p>
</blockquote>
<p>We could consider ratings along whether a game&rsquo;s marketing budget is high or low. In that way, we might reach more accurate analysis.</p>
<blockquote>
<p><strong>EoceneMiacid</strong>
<em>Terminator Resistance</em> case study is typical for disparity between users and critics. Have a look <a href="https://www.youtube.com/watch?v=H5wi-c0v2wk">here</a> how the problem was highlighted by media.</p>
</blockquote>
<p>Exploring this case study might reveal new insights as it is typical of the problem of disparity between users and professional critics. We might test our new techniques on this case study and see how our techniques perform up against it. Testing analysis techniques on a case we already know about emphatically shall help us on detecting mistakes in our analysis.</p>
<hr>
<h2 id="table-of-contents">Table of Contents<a hidden class="anchor" aria-hidden="true" href="#table-of-contents">#</a></h2>
<p>Preface</p>
<ul>
<li><a href="#preface">Preface</a></li>
<li><a href="#what-i-have-learned-from-reddit-community">What I Have Learned From Reddit Community</a></li>
</ul>
<p>Data Preprocessing</p>
<ul>
<li><a href="#import-libraries-and-local-files">Import Libraries and Local Files</a></li>
<li><a href="#read-data">Read Data</a></li>
<li><a href="#data-cleansing">Data Cleansing</a></li>
<li><a href="#data-preprocessing-summary">Data Preprocessing Summary</a></li>
</ul>
<p>Exploratory Analysis</p>
<ul>
<li><a href="#compute-disparity-difference-between-users-and-critics">Compute Disparity (Difference) Between Users and Critics</a></li>
<li><a href="#discretize-disparity-computed-earlier-into-categories">Discretize Disparity Computed Earlier Into Categories</a></li>
<li><a href="#sort-according-to-disparity-between-users-and-critics">Sort According to Disparity Between Users and Critics</a></li>
<li><a href="#basic-stats-on-disparity-between-users-and-critics">Basic Stats on Disparity Between Users and Critics</a></li>
<li><a href="#graphing-disparity-between-users-and-critics">Graphing Disparity Between Users and Critics</a></li>
<li><a href="#maximum-disparity-between-users-and-critics-ratings">Maximum Disparity Between Users and Critics Ratings</a></li>
<li><a href="#minimum-disparity-between-users-and-critics">Minimum Disparity Between Users and Critics</a></li>
<li><a href="#games-which-got-higher-ratings-from-users-than-from-critics">Games Which Got Higher Ratings From Users Than From Critics</a></li>
<li><a href="#exploratoy-analysis-summary">Exploratoy Analysis Summary</a></li>
</ul>
<p>Systematic Test</p>
<ul>
<li><a href="#a-single-permutation-shuffle-based-trial-with-histogram-probability-density-function">A Single Permutation Shuffle Based Trial With Histogram &amp; Probability Density Function</a></li>
<li><a href="#permutation-test-and-p-value-based-statistical-significance">Permutation Test and P-Value Based Statistical Significance</a></li>
<li><a href="#systematic-test-summary">Systematic Test Summary</a></li>
</ul>
<hr>
<h3 id="import-libraries-and-local-files">Import Libraries and Local Files<a hidden class="anchor" aria-hidden="true" href="#import-libraries-and-local-files">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 3rd-party libraries</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt
</span></span><span style="display:flex;"><span><span style="color:#75715e"># local-files</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> jsonRW <span style="color:#66d9ef">as</span> jsRW
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> graphs.pie <span style="color:#66d9ef">as</span> pieGraph
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> graphs.categoricalHeatmap <span style="color:#66d9ef">as</span> categoricalHeatmapGraph
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> graphs.groupedBars <span style="color:#66d9ef">as</span> groupedBarsGraph
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> graphs.histogramPdf <span style="color:#66d9ef">as</span> histogramPdfGraph
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> transformations.transformations <span style="color:#66d9ef">as</span> transform
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> transformations.discretizeIntoCategories <span style="color:#66d9ef">as</span> discIntCat
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> statTests.permutationTest <span style="color:#66d9ef">as</span> permTest
</span></span></code></pre></div><hr>
<h2 id="read-data">Read Data<a hidden class="anchor" aria-hidden="true" href="#read-data">#</a></h2>
<h3 id="read-local-json-data-into-a-pandas-dataframe">Read Local JSON Data Into a Pandas Dataframe<a hidden class="anchor" aria-hidden="true" href="#read-local-json-data-into-a-pandas-dataframe">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># a map from each platform to its corresponding dataframe</span>
</span></span><span style="display:flex;"><span>platform_df <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span><span style="color:#75715e"># platform names and their corresonding data file names</span>
</span></span><span style="display:flex;"><span>platformsNames <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;ps4&#39;</span>, <span style="color:#e6db74">&#39;xbox&#39;</span>, <span style="color:#e6db74">&#39;switch&#39;</span>, <span style="color:#e6db74">&#39;pc&#39;</span>]
</span></span><span style="display:flex;"><span>filesNames <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;ps4.csv&#39;</span>, <span style="color:#e6db74">&#39;xbox.csv&#39;</span>, <span style="color:#e6db74">&#39;switch.csv&#39;</span>, <span style="color:#e6db74">&#39;pc.csv&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># for each platform, then </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> name <span style="color:#f92672">in</span> platformsNames:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># read its local json file</span>
</span></span><span style="display:flex;"><span>    metacritic_list <span style="color:#f92672">=</span> jsRW<span style="color:#f92672">.</span>readJson(name)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># parse it as pandas dataframe, then map platform name to it</span>
</span></span><span style="display:flex;"><span>    platform_df[name] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(metacritic_list)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># take a look at a dataframe</span>
</span></span><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>]
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<hr>
<h2 id="data-cleansing">Data Cleansing<a hidden class="anchor" aria-hidden="true" href="#data-cleansing">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># drop unneeded columns and re-organize them </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> name <span style="color:#f92672">in</span> platformsNames:
</span></span><span style="display:flex;"><span>    platform_df[name] <span style="color:#f92672">=</span> platform_df[name][[<span style="color:#e6db74">&#39;title&#39;</span>, <span style="color:#e6db74">&#39;user_rating&#39;</span>, <span style="color:#e6db74">&#39;critic_rating&#39;</span>]]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># take a look at a dataframe, again</span>
</span></span><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>]
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h4 id="remarks">remarks<a hidden class="anchor" aria-hidden="true" href="#remarks">#</a></h4>
<ul>
<li>user_rating must be on the same scale as critic_rating</li>
<li>data types need to be checked</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># check columns data types</span>
</span></span><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>]<span style="color:#f92672">.</span>dtypes
</span></span></code></pre></div><pre><code>title            object
user_rating      object
critic_rating    object
dtype: object
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># convert ratings into a numeric value</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      error ahead!</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#df[&#39;user_rating&#39;] = pd.to_numeric(df[&#39;user_rating&#39;])</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#df[&#39;critic_rating&#39;] = pd.to_numeric(df[&#39;critic_rating&#39;])</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># get rid of user_rating with value equal to &#34;tbd&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># for each platform</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> name <span style="color:#f92672">in</span> platformsNames:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get its dataframe</span>
</span></span><span style="display:flex;"><span>    df <span style="color:#f92672">=</span> platform_df[name]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get index set in which user_rating is tbd, a non-numeric value</span>
</span></span><span style="display:flex;"><span>    tbdIndex <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;user_rating&#39;</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;tbd&#34;</span>]<span style="color:#f92672">.</span>index
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># drop rows specified by indices in which user_rating is tbd</span>
</span></span><span style="display:flex;"><span>    df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>drop(labels<span style="color:#f92672">=</span>tbdIndex, axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;index&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># set updated data to platform_df</span>
</span></span><span style="display:flex;"><span>    platform_df[name] <span style="color:#f92672">=</span> df
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># convert ratings to a numeric type</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># for each platform</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> name <span style="color:#f92672">in</span> platformsNames:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get its dataframe</span>
</span></span><span style="display:flex;"><span>    df <span style="color:#f92672">=</span> platform_df[name]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># convert to a numeric type</span>
</span></span><span style="display:flex;"><span>    df[<span style="color:#e6db74">&#39;user_rating&#39;</span>] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>to_numeric(df[<span style="color:#e6db74">&#39;user_rating&#39;</span>])
</span></span><span style="display:flex;"><span>    df[<span style="color:#e6db74">&#39;critic_rating&#39;</span>] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>to_numeric(df[<span style="color:#e6db74">&#39;critic_rating&#39;</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># set updated data to platform_df</span>
</span></span><span style="display:flex;"><span>    platform_df[name] <span style="color:#f92672">=</span> df
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># check data types</span>
</span></span><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>]<span style="color:#f92672">.</span>dtypes
</span></span></code></pre></div><pre><code>title             object
user_rating      float64
critic_rating      int64
dtype: object
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># user ratings must be on the same scale as critics ratings, so we multiply them by 10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># for each platform</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> platformName <span style="color:#f92672">in</span> platform_df:
</span></span><span style="display:flex;"><span>    platform_df[platformName][<span style="color:#e6db74">&#39;user_rating&#39;</span>] <span style="color:#f92672">=</span> platform_df[platformName][<span style="color:#e6db74">&#39;user_rating&#39;</span>] <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>]
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<hr>
<h3 id="optional-store-cleaned-data-into-a-csv-file">Optional: Store Cleaned Data Into a CSV File<a hidden class="anchor" aria-hidden="true" href="#optional-store-cleaned-data-into-a-csv-file">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># store data to a csv file
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># for each platform
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">for platformName in platform_df:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # save to a csv file
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    platform_df[platformName].to_csv(str(platformName)+&#39;.csv&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span></code></pre></div><pre><code>&quot;\n# store data to a csv file\n\n# for each platform\nfor platformName in platform_df:\n    # save to a csv file\n    platform_df[platformName].to_csv(str(platformName)+'.csv')\n&quot;
</code></pre>
<h3 id="data-preprocessing-summary">Data Preprocessing Summary<a hidden class="anchor" aria-hidden="true" href="#data-preprocessing-summary">#</a></h3>
<ul>
<li>Data stored as JSON format are transformed into csv</li>
<li>Unneded columns are dropped</li>
<li>Suitable data types are recognized by <em>pandas</em></li>
</ul>
<hr>
<h3 id="compute-disparity-difference-between-users-and-critics">Compute Disparity (Difference) Between Users and Critics<a hidden class="anchor" aria-hidden="true" href="#compute-disparity-difference-between-users-and-critics">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># for each platform</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> name <span style="color:#f92672">in</span> platform_df:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get dataframe of the platform</span>
</span></span><span style="display:flex;"><span>    df <span style="color:#f92672">=</span> platform_df[name]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># for each record, compute distance between user and critic ratings, then set result to a new column</span>
</span></span><span style="display:flex;"><span>    df[<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>] <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: abs(x[<span style="color:#e6db74">&#39;user_rating&#39;</span>]<span style="color:#f92672">-</span>x[<span style="color:#e6db74">&#39;critic_rating&#39;</span>]), axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># assign updates back to our dataframe</span>
</span></span><span style="display:flex;"><span>    platform_df[name] <span style="color:#f92672">=</span> df
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>]
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h3 id="discretize-disparity-computed-earlier-into-categories">Discretize Disparity Computed Earlier Into Categories<a hidden class="anchor" aria-hidden="true" href="#discretize-disparity-computed-earlier-into-categories">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># categories names and their corresponding intervals</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># category at location x corresponds to interval equal or greater than intervals location x and less than location x + 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># except for last category, has no end</span>
</span></span><span style="display:flex;"><span>categories <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series([<span style="color:#e6db74">&#34;low&#34;</span>, <span style="color:#e6db74">&#34;moderate&#34;</span>, <span style="color:#e6db74">&#34;high&#34;</span>, <span style="color:#e6db74">&#34;very_high&#34;</span>, <span style="color:#e6db74">&#34;extremely_high&#34;</span>])
</span></span><span style="display:flex;"><span>intervals_categories <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">50</span>]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># compute categories as defined earlier</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># loop on platforms</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> platformName <span style="color:#f92672">in</span> platform_df:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get dataframe of the platform</span>
</span></span><span style="display:flex;"><span>    df <span style="color:#f92672">=</span> platform_df[platformName]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># add category based on difference just defined</span>
</span></span><span style="display:flex;"><span>    df[<span style="color:#e6db74">&#39;difference_category&#39;</span>] <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>apply(discIntCat<span style="color:#f92672">.</span>numToCat, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, args<span style="color:#f92672">=</span>(<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>, categories, intervals_categories))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># let categories be recognized by pandas</span>
</span></span><span style="display:flex;"><span>    df[<span style="color:#e6db74">&#39;difference_category&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;difference_category&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#34;category&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># re-order categories</span>
</span></span><span style="display:flex;"><span>    df[<span style="color:#e6db74">&#39;difference_category&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;difference_category&#39;</span>]<span style="color:#f92672">.</span>cat<span style="color:#f92672">.</span>set_categories(categories, ordered<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># assign back to our dataframe</span>
</span></span><span style="display:flex;"><span>    platform_df[platformName] <span style="color:#f92672">=</span> df
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># take a look after our new columns added</span>
</span></span><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>]
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h3 id="sort-according-to-disparity-between-users-and-critics">Sort According to Disparity Between Users and Critics<a hidden class="anchor" aria-hidden="true" href="#sort-according-to-disparity-between-users-and-critics">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># for each platform</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> platformName <span style="color:#f92672">in</span> platform_df:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get platform dataframe</span>
</span></span><span style="display:flex;"><span>    df <span style="color:#f92672">=</span> platform_df[platformName]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># sort it by userCritic_difference</span>
</span></span><span style="display:flex;"><span>    df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>sort_values(axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;userCritic_difference&#39;</span>, ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># assign sorted dataframe back to our dataframe</span>
</span></span><span style="display:flex;"><span>    platform_df[platformName] <span style="color:#f92672">=</span> df
</span></span></code></pre></div><h3 id="basic-stats-on-disparity-between-users-and-critics">Basic Stats on Disparity Between Users and Critics<a hidden class="anchor" aria-hidden="true" href="#basic-stats-on-disparity-between-users-and-critics">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># for each platform</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> platformName <span style="color:#f92672">in</span> platform_df:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print platform name</span>
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;on &#34;</span>, platformName)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># show basic stat</span>
</span></span><span style="display:flex;"><span>    print(platform_df[platformName][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>]<span style="color:#f92672">.</span>describe())
</span></span></code></pre></div><pre><code> on  ps4
count    310.000000
mean      15.893548
std       13.074530
min        0.000000
25%        5.000000
50%       12.000000
75%       23.000000
max       69.000000
Name: userCritic_difference, dtype: float64

 on  xbox
count    186.000000
mean      14.801075
std       13.192881
min        0.000000
25%        5.000000
50%       11.000000
75%       21.000000
max       69.000000
Name: userCritic_difference, dtype: float64

 on  switch
count    364.000000
mean       6.876374
std        8.741062
min        0.000000
25%        1.750000
50%        4.000000
75%        9.000000
max       58.000000
Name: userCritic_difference, dtype: float64

 on  pc
count    327.000000
mean      13.547401
std       12.322982
min        0.000000
25%        4.000000
50%       10.000000
75%       19.000000
max       63.000000
Name: userCritic_difference, dtype: float64
</code></pre>
<hr>
<h2 id="categories-size">Categories Size<a hidden class="anchor" aria-hidden="true" href="#categories-size">#</a></h2>
<h3 id="platform-x-category-2d-sizes-dataframe">Platform x Category 2D Sizes Dataframe<a hidden class="anchor" aria-hidden="true" href="#platform-x-category-2d-sizes-dataframe">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_category_size <span style="color:#f92672">=</span> transform<span style="color:#f92672">.</span>map_columnCount(platform_df, <span style="color:#e6db74">&#39;difference_category&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_category_size
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h3 id="category-x-platform-2d-sizes-dataframe">Category x Platform 2D Sizes Dataframe<a hidden class="anchor" aria-hidden="true" href="#category-x-platform-2d-sizes-dataframe">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>category_platform_size <span style="color:#f92672">=</span> platform_category_size<span style="color:#f92672">.</span>transpose()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>category_platform_size
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>category_platform_size<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#39;low&#39;</span>, <span style="color:#e6db74">&#39;ps4&#39;</span>]
</span></span></code></pre></div><pre><code>211
</code></pre>
<hr>
<h2 id="graphing-disparity-between-users-and-critics">Graphing Disparity Between Users and Critics<a hidden class="anchor" aria-hidden="true" href="#graphing-disparity-between-users-and-critics">#</a></h2>
<h3 id="pie-graph">Pie Graph<a hidden class="anchor" aria-hidden="true" href="#pie-graph">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> columnName <span style="color:#f92672">in</span> category_platform_size:
</span></span><span style="display:flex;"><span>    platSeries <span style="color:#f92672">=</span> category_platform_size[columnName]
</span></span><span style="display:flex;"><span>    platName <span style="color:#f92672">=</span> platSeries<span style="color:#f92672">.</span>name
</span></span><span style="display:flex;"><span>    pieGraph<span style="color:#f92672">.</span>showPieGraph(platSeries, platName <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; categories percentages&#39;</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">6</span>)
</span></span></code></pre></div><p><img loading="lazy" src="./index_53_0.png" alt="png"  />
</p>
<p><img loading="lazy" src="./index_53_1.png" alt="png"  />
</p>
<p><img loading="lazy" src="./index_53_2.png" alt="png"  />
</p>
<p><img loading="lazy" src="./index_53_3.png" alt="png"  />
</p>
<h3 id="grouped-bar">Grouped Bar<a hidden class="anchor" aria-hidden="true" href="#grouped-bar">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>groupedBarsGraph<span style="color:#f92672">.</span>showGroupedBars(platform_category_size, platformsNames, <span style="color:#e6db74">&#39;categories size&#39;</span>, <span style="color:#e6db74">&#39;categories size by platform&#39;</span>)
</span></span></code></pre></div><p><img loading="lazy" src="./index_55_0.png" alt="png"  />
</p>
<h3 id="categorical-heatmap">Categorical Heatmap<a hidden class="anchor" aria-hidden="true" href="#categorical-heatmap">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>categoricalHeatmapGraph<span style="color:#f92672">.</span>showCategoricalHeatmap(<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">8</span>, category_platform_size, <span style="color:#e6db74">&#34;categories sizes among platforms&#34;</span>)
</span></span></code></pre></div><p><img loading="lazy" src="./index_57_0.png" alt="png"  />
</p>
<h3 id="maximum-disparity-between-users-and-critics-ratings">Maximum Disparity Between Users and Critics Ratings<a hidden class="anchor" aria-hidden="true" href="#maximum-disparity-between-users-and-critics-ratings">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>]<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">20</span>)
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;xbox&#39;</span>]<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">20</span>)
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;pc&#39;</span>]<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">20</span>)
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;switch&#39;</span>]<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">20</span>)
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">searchforTitleInPlatform</span>(platformStr_in, game_in):
</span></span><span style="display:flex;"><span>    tem_df <span style="color:#f92672">=</span> platform_df[platformStr_in][platform_df[platformStr_in][<span style="color:#e6db74">&#39;title&#39;</span>] <span style="color:#f92672">==</span> game_in]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(tem_df) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> tem_df<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> len(tem_df) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span>(<span style="color:#e6db74">&#34;unexpected no of games found&#34;</span>)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>searchforTitleInPlatform(<span style="color:#e6db74">&#39;xbox&#39;</span>, <span style="color:#e6db74">&#34;hitman hd enhanced collection&#34;</span>)
</span></span></code></pre></div><pre><code>title                    hitman hd enhanced collection
user_rating                                         46
critic_rating                                       66
userCritic_difference                               20
difference_category                           moderate
Name: 187, dtype: object
</code></pre>
<h3 id="minimum-disparity-between-users-and-critics">Minimum Disparity Between Users and Critics<a hidden class="anchor" aria-hidden="true" href="#minimum-disparity-between-users-and-critics">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>]<span style="color:#f92672">.</span>tail(<span style="color:#ae81ff">20</span>)
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h3 id="games-which-got-higher-ratings-from-users-than-from-critics">Games Which Got Higher Ratings From Users Than From Critics<a hidden class="anchor" aria-hidden="true" href="#games-which-got-higher-ratings-from-users-than-from-critics">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">higherUserRatings</span>(platform_in):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> platform_df[platform_in][platform_df[platform_in][<span style="color:#e6db74">&#39;user_rating&#39;</span>] <span style="color:#f92672">&gt;</span> platform_df[platform_in][<span style="color:#e6db74">&#39;critic_rating&#39;</span>]]<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>higherUserRatings(<span style="color:#e6db74">&#39;pc&#39;</span>)
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h3 id="exploratoy-analysis-summary">Exploratoy Analysis Summary<a hidden class="anchor" aria-hidden="true" href="#exploratoy-analysis-summary">#</a></h3>
<ul>
<li>NBA, Fifa, Madden, COD: modern warefare games are on top of nearly all platforms lists of maximum disparity between users and professional critics</li>
<li>Star Wars Jedi: Fallen Order got zero disparity between users and professional critics ratings</li>
<li>Left Alive is the most praised game by the community not appreciated by professional critics</li>
<li>Switch games got much lower percentage of high and moderate disparity</li>
<li>Switch games got a mean of 7 disparity, nearly half of other platforms&rsquo; disparity which got about 14</li>
</ul>
<hr>
<h2 id="a-single-permutation-shuffle-based-trial-with-histogram--probability-density-function">A Single Permutation Shuffle Based Trial With Histogram &amp; Probability Density Function<a hidden class="anchor" aria-hidden="true" href="#a-single-permutation-shuffle-based-trial-with-histogram--probability-density-function">#</a></h2>
<p>We compare platforms distributions through permutation-test. It is a more systematic approach than relying upon intuition of visualizing and comparing distributions. Given two platforms, We concatenate them into one group. That group&rsquo;s elements are randomly shuffled. Then we divide the group into new two groups. We compare the two distributions of the new two groups and assess whether the insight is still present as in the case of the two original groups of platforms. If the insight is not present in the two new groups, then that would count an evidence on behalf of our hypothesis. That is, The insight (difference in distribution) of original distributions is attributed to the two platforms. In addition, We consider average a p-value of a distribution and utilize it in our test. In Next section, We apply this method iteratively.</p>
<h3 id="ensure-series-data-are-ascendingly-ordered">Ensure Series Data are Ascendingly Ordered<a hidden class="anchor" aria-hidden="true" href="#ensure-series-data-are-ascendingly-ordered">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>print(platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>])
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>print(platform_df[<span style="color:#e6db74">&#39;switch&#39;</span>][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>])
</span></span></code></pre></div><pre><code>93     69.0
82     68.0
116    60.0
79     52.0
172    51.0
       ... 
198     0.0
330     0.0
214     0.0
76      0.0
56      0.0
Name: userCritic_difference, Length: 310, dtype: float64

240    58.0
66     55.0
94     51.0
416    43.0
123    42.0
       ... 
443     0.0
89      0.0
106     0.0
53      0.0
208     0.0
Name: userCritic_difference, Length: 364, dtype: float64
</code></pre>
<h3 id="ps4-distribution">PS4 Distribution<a hidden class="anchor" aria-hidden="true" href="#ps4-distribution">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>histogramPdfGraph<span style="color:#f92672">.</span>showHistPdf(platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>], <span style="color:#ae81ff">30</span>, <span style="color:#e6db74">&#39;#e3e2e2&#39;</span>, <span style="color:#e6db74">&#39;black&#39;</span>, <span style="color:#e6db74">&#39;disparity&#39;</span>, <span style="color:#e6db74">&#39;ps4&#39;</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">8</span>)
</span></span></code></pre></div><p><img loading="lazy" src="./index_74_0.png" alt="png"  />
</p>
<h3 id="average-of-ps4s-disparity">Average of PS4&rsquo;s Disparity<a hidden class="anchor" aria-hidden="true" href="#average-of-ps4s-disparity">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>]<span style="color:#f92672">.</span>mean()
</span></span></code></pre></div><pre><code>15.893548387096773
</code></pre>
<h3 id="switch-distribution">Switch Distribution<a hidden class="anchor" aria-hidden="true" href="#switch-distribution">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>histogramPdfGraph<span style="color:#f92672">.</span>showHistPdf(platform_df[<span style="color:#e6db74">&#39;switch&#39;</span>][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>], <span style="color:#ae81ff">30</span>, <span style="color:#e6db74">&#39;#e3e2e2&#39;</span>, <span style="color:#e6db74">&#39;black&#39;</span>, <span style="color:#e6db74">&#39;disparity&#39;</span>, <span style="color:#e6db74">&#39;switch&#39;</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">8</span>)
</span></span></code></pre></div><p><img loading="lazy" src="./index_78_0.png" alt="png"  />
</p>
<h3 id="average-of-switch-disparity">Average of Switch Disparity<a hidden class="anchor" aria-hidden="true" href="#average-of-switch-disparity">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>platform_df[<span style="color:#e6db74">&#39;switch&#39;</span>][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>]<span style="color:#f92672">.</span>mean()
</span></span></code></pre></div><pre><code>6.876373626373627
</code></pre>
<h3 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h3>
<ul>
<li>The difference between <em>ps4</em> and <em>switch</em> distributions is notable</li>
<li>The difference between <em>ps4</em> and <em>switch</em> means is about 9</li>
</ul>
<h3 id="concatenate-both-ps4-and-switch">Concatenate Both PS4 and Switch<a hidden class="anchor" aria-hidden="true" href="#concatenate-both-ps4-and-switch">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>bothGroups <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>concat([platform_df[<span style="color:#e6db74">&#39;switch&#39;</span>][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>], platform_df[<span style="color:#e6db74">&#39;ps4&#39;</span>][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>]])
</span></span></code></pre></div><h3 id="shuffle-and-divide">Shuffle and Divide<a hidden class="anchor" aria-hidden="true" href="#shuffle-and-divide">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># permutation based shuffling</span>
</span></span><span style="display:flex;"><span>rng <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>default_rng()
</span></span><span style="display:flex;"><span>bothGroups <span style="color:#f92672">=</span> rng<span style="color:#f92672">.</span>permutation(bothGroups)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># divide into two groups</span>
</span></span><span style="display:flex;"><span>firstGroup <span style="color:#f92672">=</span> bothGroups[:int(len(bothGroups)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>)]
</span></span><span style="display:flex;"><span>secondGroup <span style="color:#f92672">=</span> bothGroups[int(len(bothGroups)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>):]
</span></span></code></pre></div><h3 id="first-group-distribution">First Group Distribution<a hidden class="anchor" aria-hidden="true" href="#first-group-distribution">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>histogramPdfGraph<span style="color:#f92672">.</span>showHistPdf(firstGroup, <span style="color:#ae81ff">30</span>, <span style="color:#e6db74">&#39;#e3e2e2&#39;</span>, <span style="color:#e6db74">&#39;black&#39;</span>, <span style="color:#e6db74">&#39;disparity&#39;</span>, <span style="color:#e6db74">&#39;first group&#39;</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">8</span>)
</span></span></code></pre></div><p><img loading="lazy" src="./index_87_0.png" alt="png"  />
</p>
<h3 id="first-group-average">First Group Average<a hidden class="anchor" aria-hidden="true" href="#first-group-average">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>firstGroup<span style="color:#f92672">.</span>mean()
</span></span></code></pre></div><pre><code>11.0
</code></pre>
<h3 id="second-group-distribution">Second Group Distribution<a hidden class="anchor" aria-hidden="true" href="#second-group-distribution">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>histogramPdfGraph<span style="color:#f92672">.</span>showHistPdf(secondGroup, <span style="color:#ae81ff">30</span>, <span style="color:#e6db74">&#39;#e3e2e2&#39;</span>, <span style="color:#e6db74">&#39;black&#39;</span>, <span style="color:#e6db74">&#39;disparity&#39;</span>, <span style="color:#e6db74">&#39;second group&#39;</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">8</span>)
</span></span></code></pre></div><p><img loading="lazy" src="./index_91_0.png" alt="png"  />
</p>
<h3 id="second-group-average">Second Group Average<a hidden class="anchor" aria-hidden="true" href="#second-group-average">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>secondGroup<span style="color:#f92672">.</span>mean()
</span></span></code></pre></div><pre><code>11.047477744807122
</code></pre>
<h3 id="conclusion-1">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion-1">#</a></h3>
<ul>
<li>The difference between first and second groups distributions is not notable alike ps4 and switch</li>
<li>The difference between first and second groups means is much less than disparity between ps4 and switch distributions</li>
</ul>
<hr>
<h2 id="permutation-test-and-p-value-based-statistical-significance">Permutation Test and P-Value Based Statistical Significance<a hidden class="anchor" aria-hidden="true" href="#permutation-test-and-p-value-based-statistical-significance">#</a></h2>
<p>We apply the above method iteratively. The more tests, The more confident we are of our hypothesis. That is, The pattern of two distributions is attributed to the difference in two platforms.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># computes average of a list</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">avgOfList</span>(list_in):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> pd<span style="color:#f92672">.</span>Series(list_in)<span style="color:#f92672">.</span>mean()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># loop on pairs of platforms</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> idx, platformName <span style="color:#f92672">in</span> enumerate(platformsNames):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> idx_, platformName_ <span style="color:#f92672">in</span> enumerate(platformsNames):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># compare only unique pairs</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> idx_ <span style="color:#f92672">&gt;</span> idx:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># print pairs of platforms which are compared</span>
</span></span><span style="display:flex;"><span>            print(platformName, platformName_)
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># apply test for 25 iterations on first and second platforms of the nested loop</span>
</span></span><span style="display:flex;"><span>            testResults <span style="color:#f92672">=</span> permTest<span style="color:#f92672">.</span>permutationTest(<span style="color:#ae81ff">25</span>, platform_df[platformName][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>], platform_df[platformName_][<span style="color:#e6db74">&#39;userCritic_difference&#39;</span>])
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># print results average</span>
</span></span><span style="display:flex;"><span>            print(avgOfList(testResults))
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;&#34;</span>)
</span></span></code></pre></div><pre><code>ps4 xbox
0.6639999999999998

ps4 switch
8.21812431561929

ps4 pc
1.5160265239233675

xbox switch
7.010956187898123

xbox pc
0.5826510174543579

switch pc
6.286296818538614
</code></pre>
<h3 id="conclusion-2">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion-2">#</a></h3>
<ul>
<li>switch has greatest statistical significance in comparison with other platforms</li>
</ul>
<h3 id="systematic-test-summary">Systematic Test Summary<a hidden class="anchor" aria-hidden="true" href="#systematic-test-summary">#</a></h3>
<ul>
<li>For <em>ps4</em> and <em>switch</em>, The difference between distributions and means is notable</li>
<li>For the two randomly generated, through shuffling, groups, The difference between distributions and means is not notable alike original <em>ps4</em> and <em>switch</em></li>
<li>The disappearance of noted pattern in the two randomly generated groups counts as an evidence of our hypothesis. That is, the pattern (difference) of <em>switch</em> and <em>ps4</em> distributions is attributed to platforms factor.</li>
<li>Switch has greatest statistical significance in comparison with other platforms</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://www.mostafatouny.github.io/">Mostafa Touny</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
