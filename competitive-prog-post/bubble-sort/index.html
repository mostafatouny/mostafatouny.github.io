<!DOCTYPE html>
<!-- This site was created with Wowchemy. https://www.wowchemy.com -->
<!-- Last Published: February 9, 2024 --><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.7.0 for Hugo" />
  

  
  












  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.16f785cdb553c8c4431db6775122af35.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.2/css/academicons.min.css" integrity="sha512-KlJCpRsLf+KKu2VQa5vmRuClRFjxc5lXO03ixZt82HZUk41+1I0bD8KBSA0fY290ayMfWYI9udIqeOWSu1/uZg==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.18d89af1ddc2f9d2efb994f3d440dbdf.css" />

  
  
  

  
  
  
  
  
  
  
    
    
    <link rel="stylesheet" href="/css/libs/chroma/github-light.min.css" title="hl-light" media="print" onload="this.media='all'" disabled>
    <link rel="stylesheet" href="/css/libs/chroma/dracula.min.css" title="hl-dark" media="print" onload="this.media='all'" >
  

  
  


























  
  
  






  <meta name="author" content="Mostafa Touny" />





  

<meta name="description" content="Math is not routine calculations at all." />



<link rel="alternate" hreflang="en-us" href="https://mostafatouny.github.io/competitive-prog-post/bubble-sort/" />
<link rel="canonical" href="https://mostafatouny.github.io/competitive-prog-post/bubble-sort/" />



  <link rel="manifest" href="/manifest.webmanifest" />



<link rel="icon" type="image/png" href="/media/icon_hucf8be6c19c9550cf4f3e1aa359e52dbd_889622_32x32_fill_lanczos_center_3.png" />
<link rel="apple-touch-icon" type="image/png" href="/media/icon_hucf8be6c19c9550cf4f3e1aa359e52dbd_889622_180x180_fill_lanczos_center_3.png" />

<meta name="theme-color" content="#bbdefb" />










  
  






<meta property="twitter:card" content="summary" />
<meta property="twitter:image" content="https://mostafatouny.github.io/media/icon_hucf8be6c19c9550cf4f3e1aa359e52dbd_889622_512x512_fill_lanczos_center_3.png" />
<meta property="og:site_name" content="Mostafa Touny" />
<meta property="og:url" content="https://mostafatouny.github.io/competitive-prog-post/bubble-sort/" />
<meta property="og:title" content="UVa 120004, Bubble Sort | Mostafa Touny" />
<meta property="og:description" content="Math is not routine calculations at all." /><meta property="og:image" content="https://mostafatouny.github.io/media/icon_hucf8be6c19c9550cf4f3e1aa359e52dbd_889622_512x512_fill_lanczos_center_3.png" /><meta property="og:locale" content="en-us" />

  
    <meta
      property="article:published_time"
      content="2020-06-11T00:00:01&#43;00:00"
    />
  
  
    <meta property="article:modified_time" content="2020-06-11T00:00:01&#43;00:00">
  







  




  
  
  

  
  

  


  
  <title>UVa 120004, Bubble Sort | Mostafa Touny</title>

  
  
  
  











</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper  dark " data-wc-page-id="8c10b5862ac504d31904bb7335ea5088" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.2a7b4dc7d7846171b6299e17e1f3ac71.js"></script>

  




  <div class="page-header header--fixed">
  
  
  
  
  












<header>
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Mostafa Touny</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Mostafa Touny</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          

          

          
          
          
          

          
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/"><span>About</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link  active" href="/post/"><span>Blog</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
        

        
        
        

        
        
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <article class="article">

  













  

  
  
  
<div class="article-container pt-3">
  <h1>UVa 120004, Bubble Sort</h1>

  
  <p class="page-subtitle">Math is not routine calculations at all.</p>
  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Jun 11, 2020
  </span>
  

  

  

  
  
  
  

  
  

</div>

    





  
</div>



  <div class="article-container">

    <div class="article-style">
      <h3 id="restructuring-the-problem-more-conveniently">Restructuring The Problem, More Conveniently</h3>
<p>Before tackling a solution, We need to reformulate the given problem. You might consider this a reduction to a form which is more convenient to solve. The problem states We are given an array of size <em>n</em> whose elements are {1, 2, .., n} and are distinct. That concludes the given array <em>a</em> is a permutation of {1, 2, .., n}. If we listed all these permuations and computed <em>bubbleCounts</em> on each, Then taken their average, That would be the answer to UVa&rsquo;s problem. <em>Running findSwaps() infinitely</em> is just a fancy way of describing our</p>
<p><strong>Definition</strong>: Average <em>bubble counts</em> of all permutations.</p>
<h3 id="observations">Observations</h3>
<p>On <strong>n = 2</strong>,</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th style="text-align:center">bubbleCount</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p>average = $\frac{0+1}{2}$ = $\frac{1}{2}$</p>
<p>On <strong>n = 3</strong>,</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th style="text-align:center">bubbleCount</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2</td>
<td>3</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>2</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>3</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>1</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>2</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>1</td>
<td style="text-align:center">3</td>
</tr>
</tbody>
</table>
<p>average = $\frac{0+1+1+2+2+6}{6}$ = 2</p>
<p>On <strong>n = 4</strong>,</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th style="text-align:center">bubbleCount</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>2</td>
<td>4</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>4</td>
<td>2</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td>1</td>
<td>4</td>
<td>2</td>
<td>3</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td>1</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>3</td>
<td>4</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>4</td>
<td>3</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>1</td>
<td>4</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>4</td>
<td>1</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td>2</td>
<td>4</td>
<td>1</td>
<td>3</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td>2</td>
<td>4</td>
<td>3</td>
<td>1</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>4</td>
<td>2</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>1</td>
<td>4</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>4</td>
<td>1</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>1</td>
<td>2</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>2</td>
<td>1</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>3</td>
<td>2</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>1</td>
<td>3</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td style="text-align:center">6</td>
</tr>
</tbody>
</table>
<p>average = $\frac{0+1+1+2+2+3+1+2+2+3+3+4+2+3+3+4+4+5+3+4+4+5+5+6}{24}$ = 3</p>
<h3 id="symmetry">Symmetry</h3>
<p>Consider the case of $n=3$. Notice that the least <em>bubbleCount</em> is the first one accounting for zero, and the greatest <em>bubbleCount</em> is the last one accounting for 3. You could see that for each permutation of <em>bubbleCount</em> 1, There is a corresponding permutation of <em>bubbleCount</em> 2. The sum of 1 and 2 is also 3 !</p>
<p>Note also that the corresponding permutation is exactly like the other one but inversed. For instance permutation <em>&lt;3, 1, 2&gt;</em> is the inversed in order of <em>&lt;2, 1, 3&gt;</em>.</p>
<p>So, we could divide our list of permutations into two halves such that a pair&rsquo;s sum equals $min(bubbleCount) + max(bubbleCount)$. Clearly, There are a total of $n!$ permutations. The number of those pairs is half of total permutations. Hence, total sum of bubble counts is $\frac{n!}{2} \times (min(bubbleCount) + max(bubbleCount))$. Now we divide that total sum on total number of permutations to get the average of all <em>bubbleCounts</em>. So, The formula is now $\frac{(min(bubbleCount) + max(bubbleCount))}{2}$.  Clearly, least <em>bubbleCount</em> is always zero, As we have the permutation which is already sorted. What about the greatest one? The worst case is the permutation sorted inversely. In such case, The first iteration, i.e outer loop, accounts for $(n-1)$ bubbles. The second itertaion accounts for $(n-2)$, and so on untill an iteration accounts for exactly one bubble. So, $max(bubbleCount)$ = (n-1) + (n-2) + .. + 1 = $\frac{n \times (n-1)}{2}$. Hence, Our <strong>conjectured</strong> formula is</p>
<p>$$\frac{0 + \frac{n(n-1)}{2} }{2} = \frac{n(n-1)}{4}$$</p>
<p>Check <a href="https://en.wikipedia.org/wiki/Carl_Friedrich_Gauss#Anecdotes" target="_blank" rel="noopener">this</a> for more information about gaussian&rsquo;s famous equation.</p>
<h3 id="more-justification-on-symmetry">More Justification on Symmetry</h3>
<p>We have shown that least <em>bubbleCount</em> and greatest <em>bubbleCount</em> among all permutations are equal to zero and (n-1) + (n-2) + .. + 1, respectively. Let&rsquo;s take a deeper and more general look on why we could divide our permutations list into two halfs whereby each pair&rsquo;s sum is equal to greatest <em>bubbleCount</em>. That pair&rsquo;s permutations are also inverse of each other.</p>
<p>For the case of $n=3$, Pick up two permutations which are inverse of each other and try to run <em>bubbleSort</em> algorithm on both of them. You shall find for a permutation, The bubble counted on some pair of numbers, is not counted in the other corresponding permutation. For instance, permutation <em>&lt;1, 3, 2&gt;</em> needs one <em>bubble swap</em> in <em>&lt;3, 2&gt;</em> pair. For the permutation&rsquo;s inverse <em>&lt;2, 3, 1&gt;</em>, There&rsquo;s no need to bubble swap <em>&lt;2, 3&gt;</em> pair. That saves us one bubble swap out of three which is the maximum <em>bubbleCount</em>. 3 - 1 = 2, The bubbleCount of <em>&lt;2, 3, 1&gt;</em>. The same applies for any two pairs of permutations which are inverse of each other.</p>
<h3 id="accepted-source-code-on-uva">Accepted Source Code on UVa</h3>
<pre><code>#include &amp;lt;cstdio&amp;gt;

#define ll long long
#define ull unsigned ll

using namespace std;

bool checkIthBit (int n, int i) {
  if( n &amp;amp; (1 &amp;lt;&amp;lt; i) )
    return true;
  return false;
}


int main() {
  int t, cou = 1;

  scanf(&quot;%d&quot;, &amp;amp;t);

  while (cou &amp;lt;= t) {
    int n;
    ull numerator; int denominator;

    scanf(&quot;%d&quot;, &amp;amp;n);

    numerator = ((ull)n*(ull)(n-1));
    denominator = 4;

    // check if nume is div by 2, and simplify rational form
    for (int i=0; i&amp;lt;2; ++i) {
      if (!checkIthBit(numerator, 0)) {
	numerator = numerator/2;
	denominator = denominator/2;
      }
    }

    if (denominator == 1) printf(&quot;Case %d: %llu\n&quot;, cou, numerator);
    else printf(&quot;Case %d: %llu/%d\n&quot;, cou, numerator, denominator);

    cou++;
  }
  return 0;
}
</code></pre>
<hr>
<p>Many of those who do not appreciate math, think of it as a routine where you just follow a systematic order of operations on numbers. If you are one those, I hope this article changed, at least doubted, how you perceive it. There are a whole deep and elegant adventures still awaiting you if you delved more deeply.
</pre></body></html></p>

    </div>

    







<div class="share-box">
  <ul class="share">
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://mostafatouny.github.io/"><img class="avatar mr-3 avatar-circle" src="/author/mostafa-touny/avatar_hudd54214bfd99d38ea46f42c72f0cfc91_878326_270x270_fill_q75_lanczos_center.jpg" alt="Mostafa Touny"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://mostafatouny.github.io/">Mostafa Touny</a></h5>
      <h6 class="card-subtitle">TA/RA at MSA</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="http://u.pc.cd/lr3rtalK" target="_blank" rel="noopener">
        <i class="ai ai-cv"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:mostafatouny%3cat%3eproton%3cdot%3eme" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/Mostafa_Touny" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/mostafa-touny/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.reddit.com/user/xTouny" target="_blank" rel="noopener">
        <i class="fab fa-reddit"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.instagram.com/mostafa.touny/" target="_blank" rel="noopener">
        <i class="fab fa-instagram"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


















  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  












  
  
  
  
  













  





  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> — the free, <a href="https://github.com/wowchemy/wowchemy-hugo-themes" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.b4708d4364577c16ab7001b265a063a4.js"></script>




  

  
  

  






























<script id="page-data" type="application/json">{"use_headroom":true}</script>



  <script src="/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js" type="module"></script>










<script src="/en/js/wowchemy.min.e250aa98ea6f87c6f943e9e06909f6ca.js"></script>

























</body>
</html>
