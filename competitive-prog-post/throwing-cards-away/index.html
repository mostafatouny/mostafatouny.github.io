<!DOCTYPE html>
<!-- This site was created with Hugo Blox. https://hugoblox.com -->
<!-- Last Published: August 5, 2024 --><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Hugo Blox Builder 5.9.7" />
  

  
  












  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.26c458e6907dc03073573976b7f4044e.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.4/css/academicons.min.css" integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.08764d393984928e0719bd53b26ed27a.css" />

  
  
  

  
  
  
  
  
  
  
    
    
    <link rel="stylesheet" href="/css/libs/chroma/github-light.min.css" title="hl-light" media="print" onload="this.media='all'" disabled>
    <link rel="stylesheet" href="/css/libs/chroma/dracula.min.css" title="hl-dark" media="print" onload="this.media='all'" >
  

  
  



























  
  
  






  <meta name="author" content="Mostafa Touny" />





  

<meta name="description" content="Math is not routine calculations at all." />



<link rel="alternate" hreflang="en-us" href="https://mostafatouny.github.io/competitive-prog-post/throwing-cards-away/" />
<link rel="canonical" href="https://mostafatouny.github.io/competitive-prog-post/throwing-cards-away/" />



  <link rel="manifest" href="/manifest.webmanifest" />



<link rel="icon" type="image/png" href="/media/icon_hucf8be6c19c9550cf4f3e1aa359e52dbd_889622_32x32_fill_lanczos_center_3.png" />
<link rel="apple-touch-icon" type="image/png" href="/media/icon_hucf8be6c19c9550cf4f3e1aa359e52dbd_889622_180x180_fill_lanczos_center_3.png" />

<meta name="theme-color" content="#bbdefb" />










  
  






<meta property="twitter:card" content="summary" />
<meta property="twitter:image" content="https://mostafatouny.github.io/media/icon_hucf8be6c19c9550cf4f3e1aa359e52dbd_889622_512x512_fill_lanczos_center_3.png" />



  

<meta property="og:type" content="website" />
<meta property="og:site_name" content="Mostafa Touny" />
<meta property="og:url" content="https://mostafatouny.github.io/competitive-prog-post/throwing-cards-away/" />
<meta property="og:title" content="UVa 10940, Throwing Cards Away II | Mostafa Touny" />
<meta property="og:description" content="Math is not routine calculations at all." /><meta property="og:image" content="https://mostafatouny.github.io/media/icon_hucf8be6c19c9550cf4f3e1aa359e52dbd_889622_512x512_fill_lanczos_center_3.png" /><meta property="og:locale" content="en-us" />

  
    <meta
      property="article:published_time"
      content="2020-06-11T00:00:01&#43;00:00"
    />
  
  
    <meta property="article:modified_time" content="2020-06-11T00:00:01&#43;00:00">
  







  




  
  
  

  
  

  


  
  <title>UVa 10940, Throwing Cards Away II | Mostafa Touny</title>

  
  
  
  











</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper  dark " data-wc-page-id="b5dbdef4b2977fa21c50b7d5f13b1905" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.db21e13b9b5c4f4b947717750ec8b3cc.js"></script>

  




  <div class="page-header header--fixed">
  
  
  
  
  












<header>
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Mostafa Touny</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Mostafa Touny</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          

          

          
          
          
          

          
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/"><span>About</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link  active" href="/post/"><span>Blog</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
        

        
        
        

        
        
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <article class="article">

  













  

  
  
  
<div class="article-container pt-3">
  <h1>UVa 10940, Throwing Cards Away II</h1>

  
  <p class="page-subtitle">Math is not routine calculations at all.</p>
  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Jun 11, 2020
  </span>
  

  

  

  
  
  
  

  
  

</div>

    





  
</div>



  <div class="article-container">

    <div class="article-style">
      <h3 id="first-trial">First Trial</h3>
<p>At each step we discard a card away, and move the new card at the top to the bottom of the deck. That suggests we eliminate half of the deck for one iteration. Consider the following deck</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>x</td>
</tr>
<tr>
<td>2</td>
<td>-&gt;</td>
</tr>
<tr>
<td>3</td>
<td>x</td>
</tr>
<tr>
<td>4</td>
<td>-&gt;</td>
</tr>
<tr>
<td>5</td>
<td>x</td>
</tr>
<tr>
<td>6</td>
<td>-&gt;</td>
</tr>
<tr>
<td>7</td>
<td>x</td>
</tr>
<tr>
<td>8</td>
<td>-&gt;</td>
</tr>
</tbody>
</table>
<p>Here, We have a deck of eight cards whereby card number one is at the top of the deck. <em>x</em> indicates the card is to be thrown away, while <em>-&gt;</em> indicates the card to be moved to the bottom. Note that in this case, None of the <em>-&gt;</em> cards are going to be thrown away due to later <em>x</em>. It is easy to see that the result is as follows</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td></td>
</tr>
<tr>
<td>6</td>
<td></td>
</tr>
<tr>
<td>8</td>
<td></td>
</tr>
</tbody>
</table>
<p>Similarly to the first iteration, the second one would be</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>x</td>
</tr>
<tr>
<td>4</td>
<td>-&gt;</td>
</tr>
<tr>
<td>6</td>
<td>x</td>
</tr>
<tr>
<td>8</td>
<td>-&gt;</td>
</tr>
</tbody>
</table>
<p>yielding</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td></td>
</tr>
<tr>
<td>8</td>
<td></td>
</tr>
</tbody>
</table>
<p>Finally, Getting <em>card eight</em> as the answer.</p>
<p>So, On each iteration, we divided the dick by half and still got an even number of cards. It is clear that is attributed to the fact that <em>eight</em> is a power of two. Otherwise, On some iteration we would end-up with an odd number of cards. That iteration is not the last one in which we have the last remaining card. You could see if we have a deck whose cards number is some power of two, Then the answer would be the last card at the bottom. In other words, if our cards number is $n = 2^k$ for some <em>k</em>, Then the correct answer of the problem, i.e the last remaining card after discarding cards and moving them to the bottom, is $2^k$.</p>
<h3 id="more-justification-of-first-trials-observation">More Justification of First Trial&rsquo;s Observation</h3>
<p>Let&rsquo;s try to take a deeper look at why do we always obtain the last bottom card as the remaining one in case the deck is some power of two, As illustrated earlier. Consider our $2^3 = 8$ deck but represented differently</p>
<p>On <strong>First Iteration</strong>:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>$2^0 \times 1$</td>
<td>x</td>
</tr>
<tr>
<td>$2^0 \times 2$</td>
<td>-&gt;</td>
</tr>
<tr>
<td>$2^0 \times 3$</td>
<td>x</td>
</tr>
<tr>
<td>$2^0 \times 4$</td>
<td>-&gt;</td>
</tr>
<tr>
<td>$2^0 \times 5$</td>
<td>x</td>
</tr>
<tr>
<td>$2^0 \times 6$</td>
<td>-&gt;</td>
</tr>
<tr>
<td>$2^0 \times 7$</td>
<td>x</td>
</tr>
<tr>
<td>$2^0 \times 8$</td>
<td>-&gt;</td>
</tr>
</tbody>
</table>
<p>On <strong>Second Iteration</strong>:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>$2^1 \times 1$</td>
<td>x</td>
</tr>
<tr>
<td>$2^1 \times 2$</td>
<td>-&gt;</td>
</tr>
<tr>
<td>$2^1 \times 3$</td>
<td>x</td>
</tr>
<tr>
<td>$2^1 \times 4$</td>
<td>-&gt;</td>
</tr>
</tbody>
</table>
<p>On <strong>Third Iteration</strong>:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>$2^2 \times 1$</td>
<td>x</td>
</tr>
<tr>
<td>$2^2 \times 2$</td>
<td>-&gt;</td>
</tr>
</tbody>
</table>
<p>Remarkably, Cards multiplied by an odd number gets thrown away, while cards multiplied by an even number gets moved to the bottom and survives to the next iteration. You could also see that $2^{k_0} \times (2k_1) = 2^{k_0+1}$. The even number increases the power of two by one. That correspoinds with our observation that each iteration&rsquo;s power is increased by one than its predocessor&rsquo;s power. Clearly, Continuing in this way ends us up with the greatest power of two in the whole deck, which is also the last bottom card.</p>
<h3 id="generalizing-for-none-power-of-two">Generalizing for None Power of Two</h3>
<p>Our solution for the generalized case is in fact an extension of the special case of deck&rsquo;s whose number is a power of two. Let&rsquo;s begin from where we ended up.</p>
<h4 id="a-deck-of-seven-cards">A Deck of Seven Cards</h4>
<p>On <strong>First Iteration</strong>:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>x</td>
</tr>
<tr>
<td>2</td>
<td>-&gt;</td>
</tr>
<tr>
<td>3</td>
<td>x</td>
</tr>
<tr>
<td>4</td>
<td>-&gt;</td>
</tr>
<tr>
<td>5</td>
<td>x</td>
</tr>
<tr>
<td>6</td>
<td>-&gt;</td>
</tr>
<tr>
<td>7</td>
<td></td>
</tr>
</tbody>
</table>
<p>Note that I intentionally did not mark <em>card seven</em>. Otherwise, The second iteration would have the first card marked as <em>-&gt;</em>, violating consistency of marking among iterations. In case cards number is odd, as in this case, We prefer to avoid marking the last card, and get the second iteration as</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>7</td>
<td>x</td>
</tr>
<tr>
<td>2</td>
<td>-&gt;</td>
</tr>
<tr>
<td>4</td>
<td>x</td>
</tr>
<tr>
<td>6</td>
<td>-&gt;</td>
</tr>
</tbody>
</table>
<p>We have got here cards of some power of two. Following our illustrated observation in the previous section, We could conclude the last remaining card is <em>card six</em>.</p>
<p>For eight cards deck, The second iteration was <em>&lt;2, 4, 6, 8&gt;</em>. Removing <em>card eight</em> from the deck resulted in having <em>card seven</em> as a remainder from the first iteration, and shifting <em>&lt;2, 4, 6, 8&gt;</em> one position to the right. As a result, We have <em>card six</em> as the last one in <em>second iteration</em></p>
<p>For eight cards deck, The last remaining card was <em>eight</em>. For seven cards deck, the last remaining card is <em>six</em>. Removing one card from the <em>eight cards deck</em> yielded the same remaining card but subtracted by two. In other words, $8 - 1$ cards deck yields the last remaining card <em>sevenCardsAnswer</em> = <em>eightCardsAnswer</em> - (2 * removedCards) = 8 - (2 * 1) = 6. Let&rsquo;s try more trials and see how they relate with the case of <em>eight cards deck</em></p>
<h4 id="a-deck-of-six-cards">A Deck of Six Cards</h4>
<p>On <strong>First Iteration</strong>:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>x</td>
</tr>
<tr>
<td>2</td>
<td>-&gt;</td>
</tr>
<tr>
<td>3</td>
<td>x</td>
</tr>
<tr>
<td>4</td>
<td>-&gt;</td>
</tr>
<tr>
<td>5</td>
<td>x</td>
</tr>
<tr>
<td>6</td>
<td>-&gt;</td>
</tr>
</tbody>
</table>
<p>On <strong>Second Iteration</strong>:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>x</td>
</tr>
<tr>
<td>4</td>
<td>-&gt;</td>
</tr>
<tr>
<td>6</td>
<td>x</td>
</tr>
</tbody>
</table>
<p>So, we end-up with <em>card four</em>. Again, $8 - 2$ cards deck yields the last remaining card <em>sixCardsAnswer</em> = <em>eightCardsAnswer</em> - (2 * removedCards) = 8 - (2 * 2) = 4. Here, unlike the case of <em>seven cards deck</em>, There is no remainder from the first iteration so that we end up with four cards in the second iteration. As two cards are removed from <em>eight cards deck</em>, we have three cards in second iteration rather than four. <em>card six</em> here is in an odd position, so it gets thrown away. The last remaining card is <em>card four</em>. In other words, It seems removing two cards from <em>eight cards deck</em> shifted our <em>&lt;2, 4, 6, 8&gt;</em> a position to the right in addition to removing the last card.</p>
<h4 id="a-deck-of-five-cards">A Deck of Five Cards</h4>
<p>On <strong>First Iteration</strong>:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>x</td>
</tr>
<tr>
<td>2</td>
<td>-&gt;</td>
</tr>
<tr>
<td>3</td>
<td>x</td>
</tr>
<tr>
<td>4</td>
<td>-&gt;</td>
</tr>
<tr>
<td>5</td>
<td></td>
</tr>
</tbody>
</table>
<p>As in the case of <em>seven cards deck</em>, We do not mark <em>card five</em> in the first iteration. Recall the the last card is not marked whenever we have an odd number of cards in an interation.</p>
<p>On <strong>Second Iteration</strong>:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>5</td>
<td>x</td>
</tr>
<tr>
<td>2</td>
<td>-&gt;</td>
</tr>
<tr>
<td>4</td>
<td>x</td>
</tr>
</tbody>
</table>
<p>Again, $8 - 3$ cards deck yields the last remaining card <em>fiveCardsAnswer</em> = <em>eightCardsAnswer</em> - (2 * removedCards) = 8 - (2 * 3) = 2. It seems removing two cards shifted <em>&lt;2, 4, 6, 8&gt;</em> on position to the right, and removing an additional card shifted it another position to the right but with a remainder, namely <em>card five</em>. So, we get <em>card two</em> as the answer.</p>
<h3 id="magical-formula">Magical Formula</h3>
<p>The illustrated reasoning <strong>SEEMS</strong> to work on not just $2^3 = 8$ but any power of two. For an arbitrary number of deck cards $n$, We find the power of two greater than or equal to $n$, Then compute the answer for $n$ by <em>nCardsAnswer</em> = <em>Power2CardsAnswer</em> - (2 * (Power2Cards - nCards)). So, How do find the power of two equal or greater than $n$? Here is a trick: $2^{ceil(log_2(n))}$. So, The final formula would be</p>
<p>$$2^{ceil(log_2(n))} - (2 \times (2^{ceil(log_2(n))} - n)) = 2 \times (n-2^{ceil(log_2(n))-1})$$</p>
<h3 id="accepted-source-code-on-uva">Accepted Source Code on UVa</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include &amp;lt;cstdio&amp;gt;
</span></span></span><span class="line"><span class="cl"><span class="cp">#include &amp;lt;math.h&amp;gt;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">res</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">scanf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">amp</span><span class="p">;</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">res</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">log2</span><span class="p">(</span><span class="n">n</span><span class="p">))</span><span class="o">-</span><span class="mi">1</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&#34;1</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">else</span> <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">res</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>
    </div>

    







<div class="share-box">
  <ul class="share">
    
  </ul>
</div>



















  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  












  
  
  
  
  













  





  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://hugoblox.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Hugo Blox Builder</a> — the free, <a href="https://github.com/HugoBlox/hugo-blox-builder" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.938a3a7554cd9f6602290411f64d2617.js"></script>




  

  
  

  








































<script id="page-data" type="application/json">{"use_headroom":true}</script>


  <script src="/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js" type="module"></script>










<script src="/en/js/wowchemy.min.dddc448a63b69628e8b50b98438b6866.js"></script>

























</body>
</html>
