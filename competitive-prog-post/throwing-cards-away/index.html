<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>UVa 10940, Throwing Cards Away II | Mostafa Touny</title>
<meta name="keywords" content="">
<meta name="description" content="Math is not routine calculations at all.">
<meta name="author" content="">
<link rel="canonical" href="https://www.mostafatouny.github.io/competitive-prog-post/throwing-cards-away/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e6ee52f0fc7c2e3dbd78858fc1b3e06fb86a3c6ee38d351342e06e23a24d02d6.css" integrity="sha256-5u5S8Px8Lj29eIWPwbPgb7hqPG7jjTUTQuBuI6JNAtY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.mostafatouny.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.mostafatouny.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.mostafatouny.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.mostafatouny.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.mostafatouny.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://www.mostafatouny.github.io/competitive-prog-post/throwing-cards-away/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="UVa 10940, Throwing Cards Away II" />
<meta property="og:description" content="Math is not routine calculations at all." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.mostafatouny.github.io/competitive-prog-post/throwing-cards-away/" /><meta property="article:section" content="competitive-prog-post" />
<meta property="article:published_time" content="2020-06-11T00:00:01+00:00" />
<meta property="article:modified_time" content="2020-06-11T00:00:01+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="UVa 10940, Throwing Cards Away II"/>
<meta name="twitter:description" content="Math is not routine calculations at all."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Competitive Programming",
      "item": "https://www.mostafatouny.github.io/competitive-prog-post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "UVa 10940, Throwing Cards Away II",
      "item": "https://www.mostafatouny.github.io/competitive-prog-post/throwing-cards-away/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "UVa 10940, Throwing Cards Away II",
  "name": "UVa 10940, Throwing Cards Away II",
  "description": "Math is not routine calculations at all.",
  "keywords": [
    
  ],
  "articleBody": "First Trial At each step we discard a card away, and move the new card at the top to the bottom of the deck. That suggests we eliminate half of the deck for one iteration. Consider the following deck\n1 x 2 -\u003e 3 x 4 -\u003e 5 x 6 -\u003e 7 x 8 -\u003e Here, We have a deck of eight cards whereby card number one is at the top of the deck. x indicates the card is to be thrown away, while -\u003e indicates the card to be moved to the bottom. Note that in this case, None of the -\u003e cards are going to be thrown away due to later x. It is easy to see that the result is as follows\n2 4 6 8 Similarly to the first iteration, the second one would be\n2 x 4 -\u003e 6 x 8 -\u003e yielding\n4 8 Finally, Getting card eight as the answer.\nSo, On each iteration, we divided the dick by half and still got an even number of cards. It is clear that is attributed to the fact that eight is a power of two. Otherwise, On some iteration we would end-up with an odd number of cards. That iteration is not the last one in which we have the last remaining card. You could see if we have a deck whose cards number is some power of two, Then the answer would be the last card at the bottom. In other words, if our cards number is $n = 2^k$ for some k, Then the correct answer of the problem, i.e the last remaining card after discarding cards and moving them to the bottom, is $2^k$.\nMore Justification of First Trial’s Observation Let’s try to take a deeper look at why do we always obtain the last bottom card as the remaining one in case the deck is some power of two, As illustrated earlier. Consider our $2^3 = 8$ deck but represented differently\nOn First Iteration:\n$2^0 \\times 1$ x $2^0 \\times 2$ -\u003e $2^0 \\times 3$ x $2^0 \\times 4$ -\u003e $2^0 \\times 5$ x $2^0 \\times 6$ -\u003e $2^0 \\times 7$ x $2^0 \\times 8$ -\u003e On Second Iteration:\n$2^1 \\times 1$ x $2^1 \\times 2$ -\u003e $2^1 \\times 3$ x $2^1 \\times 4$ -\u003e On Third Iteration:\n$2^2 \\times 1$ x $2^2 \\times 2$ -\u003e Remarkably, Cards multiplied by an odd number gets thrown away, while cards multiplied by an even number gets moved to the bottom and survives to the next iteration. You could also see that $2^{k_0} \\times (2k_1) = 2^{k_0+1}$. The even number increases the power of two by one. That correspoinds with our observation that each iteration’s power is increased by one than its predocessor’s power. Clearly, Continuing in this way ends us up with the greatest power of two in the whole deck, which is also the last bottom card.\nGeneralizing for None Power of Two Our solution for the generalized case is in fact an extension of the special case of deck’s whose number is a power of two. Let’s begin from where we ended up.\nA Deck of Seven Cards On First Iteration:\n1 x 2 -\u003e 3 x 4 -\u003e 5 x 6 -\u003e 7 Note that I intentionally did not mark card seven. Otherwise, The second iteration would have the first card marked as -\u003e, violating consistency of marking among iterations. In case cards number is odd, as in this case, We prefer to avoid marking the last card, and get the second iteration as\n7 x 2 -\u003e 4 x 6 -\u003e We have got here cards of some power of two. Following our illustrated observation in the previous section, We could conclude the last remaining card is card six.\nFor eight cards deck, The second iteration was \u003c2, 4, 6, 8\u003e. Removing card eight from the deck resulted in having card seven as a remainder from the first iteration, and shifting \u003c2, 4, 6, 8\u003e one position to the right. As a result, We have card six as the last one in second iteration\nFor eight cards deck, The last remaining card was eight. For seven cards deck, the last remaining card is six. Removing one card from the eight cards deck yielded the same remaining card but subtracted by two. In other words, $8 - 1$ cards deck yields the last remaining card sevenCardsAnswer = eightCardsAnswer - (2 * removedCards) = 8 - (2 * 1) = 6. Let’s try more trials and see how they relate with the case of eight cards deck\nA Deck of Six Cards On First Iteration:\n1 x 2 -\u003e 3 x 4 -\u003e 5 x 6 -\u003e On Second Iteration:\n2 x 4 -\u003e 6 x So, we end-up with card four. Again, $8 - 2$ cards deck yields the last remaining card sixCardsAnswer = eightCardsAnswer - (2 * removedCards) = 8 - (2 * 2) = 4. Here, unlike the case of seven cards deck, There is no remainder from the first iteration so that we end up with four cards in the second iteration. As two cards are removed from eight cards deck, we have three cards in second iteration rather than four. card six here is in an odd position, so it gets thrown away. The last remaining card is card four. In other words, It seems removing two cards from eight cards deck shifted our \u003c2, 4, 6, 8\u003e a position to the right in addition to removing the last card.\nA Deck of Five Cards On First Iteration:\n1 x 2 -\u003e 3 x 4 -\u003e 5 As in the case of seven cards deck, We do not mark card five in the first iteration. Recall the the last card is not marked whenever we have an odd number of cards in an interation.\nOn Second Iteration:\n5 x 2 -\u003e 4 x Again, $8 - 3$ cards deck yields the last remaining card fiveCardsAnswer = eightCardsAnswer - (2 * removedCards) = 8 - (2 * 3) = 2. It seems removing two cards shifted \u003c2, 4, 6, 8\u003e on position to the right, and removing an additional card shifted it another position to the right but with a remainder, namely card five. So, we get card two as the answer.\nMagical Formula The illustrated reasoning SEEMS to work on not just $2^3 = 8$ but any power of two. For an arbitrary number of deck cards $n$, We find the power of two greater than or equal to $n$, Then compute the answer for $n$ by nCardsAnswer = Power2CardsAnswer - (2 * (Power2Cards - nCards)). So, How do find the power of two equal or greater than $n$? Here is a trick: $2^{ceil(log_2(n))}$. So, The final formula would be\n$$2^{ceil(log_2(n))} - (2 \\times (2^{ceil(log_2(n))} - n)) = 2 \\times (n-2^{ceil(log_2(n))-1})$$Accepted Source Code on UVa #include \u0026lt;cstdio\u0026gt; #include \u0026lt;math.h\u0026gt; using namespace std; int main() { int n, res; scanf(\"%d\", \u0026amp;n); res = 2*(n-pow(2, (ceil(log2(n))-1))); if (n == 1) printf(\"1\\n\"); else printf(\"%d\\n\", res); return 0; } ",
  "wordCount" : "1180",
  "inLanguage": "en",
  "datePublished": "2020-06-11T00:00:01Z",
  "dateModified": "2020-06-11T00:00:01Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.mostafatouny.github.io/competitive-prog-post/throwing-cards-away/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Mostafa Touny",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.mostafatouny.github.io/favicon.ico"
    }
  }
}
</script>

    
    
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [ ['$$', '$$'], ['\\[', '\\]'] ],  
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ]      
    }
  };
</script>

    
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.mostafatouny.github.io/" accesskey="h" title="Mostafa Touny (Alt + H)">Mostafa Touny</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.mostafatouny.github.io/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://www.mostafatouny.github.io/post" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      UVa 10940, Throwing Cards Away II
    </h1>
    <div class="post-meta"><span title='2020-06-11 00:00:01 +0000 UTC'>June 11, 2020</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#first-trial" aria-label="First Trial">First Trial</a></li>
                <li>
                    <a href="#more-justification-of-first-trials-observation" aria-label="More Justification of First Trial&rsquo;s Observation">More Justification of First Trial&rsquo;s Observation</a></li>
                <li>
                    <a href="#generalizing-for-none-power-of-two" aria-label="Generalizing for None Power of Two">Generalizing for None Power of Two</a><ul>
                        
                <li>
                    <a href="#a-deck-of-seven-cards" aria-label="A Deck of Seven Cards">A Deck of Seven Cards</a></li>
                <li>
                    <a href="#a-deck-of-six-cards" aria-label="A Deck of Six Cards">A Deck of Six Cards</a></li>
                <li>
                    <a href="#a-deck-of-five-cards" aria-label="A Deck of Five Cards">A Deck of Five Cards</a></li></ul>
                </li>
                <li>
                    <a href="#magical-formula" aria-label="Magical Formula">Magical Formula</a></li>
                <li>
                    <a href="#accepted-source-code-on-uva" aria-label="Accepted Source Code on UVa">Accepted Source Code on UVa</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="first-trial">First Trial<a hidden class="anchor" aria-hidden="true" href="#first-trial">#</a></h3>
<p>At each step we discard a card away, and move the new card at the top to the bottom of the deck. That suggests we eliminate half of the deck for one iteration. Consider the following deck</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td>x</td>
      </tr>
      <tr>
          <td>2</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>3</td>
          <td>x</td>
      </tr>
      <tr>
          <td>4</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>5</td>
          <td>x</td>
      </tr>
      <tr>
          <td>6</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>7</td>
          <td>x</td>
      </tr>
      <tr>
          <td>8</td>
          <td>-&gt;</td>
      </tr>
  </tbody>
</table>
<p>Here, We have a deck of eight cards whereby card number one is at the top of the deck. <em>x</em> indicates the card is to be thrown away, while <em>-&gt;</em> indicates the card to be moved to the bottom. Note that in this case, None of the <em>-&gt;</em> cards are going to be thrown away due to later <em>x</em>. It is easy to see that the result is as follows</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>2</td>
          <td></td>
      </tr>
      <tr>
          <td>4</td>
          <td></td>
      </tr>
      <tr>
          <td>6</td>
          <td></td>
      </tr>
      <tr>
          <td>8</td>
          <td></td>
      </tr>
  </tbody>
</table>
<p>Similarly to the first iteration, the second one would be</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>2</td>
          <td>x</td>
      </tr>
      <tr>
          <td>4</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>6</td>
          <td>x</td>
      </tr>
      <tr>
          <td>8</td>
          <td>-&gt;</td>
      </tr>
  </tbody>
</table>
<p>yielding</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>4</td>
          <td></td>
      </tr>
      <tr>
          <td>8</td>
          <td></td>
      </tr>
  </tbody>
</table>
<p>Finally, Getting <em>card eight</em> as the answer.</p>
<p>So, On each iteration, we divided the dick by half and still got an even number of cards. It is clear that is attributed to the fact that <em>eight</em> is a power of two. Otherwise, On some iteration we would end-up with an odd number of cards. That iteration is not the last one in which we have the last remaining card. You could see if we have a deck whose cards number is some power of two, Then the answer would be the last card at the bottom. In other words, if our cards number is $n = 2^k$ for some <em>k</em>, Then the correct answer of the problem, i.e the last remaining card after discarding cards and moving them to the bottom, is $2^k$.</p>
<h3 id="more-justification-of-first-trials-observation">More Justification of First Trial&rsquo;s Observation<a hidden class="anchor" aria-hidden="true" href="#more-justification-of-first-trials-observation">#</a></h3>
<p>Let&rsquo;s try to take a deeper look at why do we always obtain the last bottom card as the remaining one in case the deck is some power of two, As illustrated earlier. Consider our $2^3 = 8$ deck but represented differently</p>
<p>On <strong>First Iteration</strong>:</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>$2^0 \times 1$</td>
          <td>x</td>
      </tr>
      <tr>
          <td>$2^0 \times 2$</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>$2^0 \times 3$</td>
          <td>x</td>
      </tr>
      <tr>
          <td>$2^0 \times 4$</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>$2^0 \times 5$</td>
          <td>x</td>
      </tr>
      <tr>
          <td>$2^0 \times 6$</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>$2^0 \times 7$</td>
          <td>x</td>
      </tr>
      <tr>
          <td>$2^0 \times 8$</td>
          <td>-&gt;</td>
      </tr>
  </tbody>
</table>
<p>On <strong>Second Iteration</strong>:</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>$2^1 \times 1$</td>
          <td>x</td>
      </tr>
      <tr>
          <td>$2^1 \times 2$</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>$2^1 \times 3$</td>
          <td>x</td>
      </tr>
      <tr>
          <td>$2^1 \times 4$</td>
          <td>-&gt;</td>
      </tr>
  </tbody>
</table>
<p>On <strong>Third Iteration</strong>:</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>$2^2 \times 1$</td>
          <td>x</td>
      </tr>
      <tr>
          <td>$2^2 \times 2$</td>
          <td>-&gt;</td>
      </tr>
  </tbody>
</table>
<p>Remarkably, Cards multiplied by an odd number gets thrown away, while cards multiplied by an even number gets moved to the bottom and survives to the next iteration. You could also see that $2^{k_0} \times (2k_1) = 2^{k_0+1}$. The even number increases the power of two by one. That correspoinds with our observation that each iteration&rsquo;s power is increased by one than its predocessor&rsquo;s power. Clearly, Continuing in this way ends us up with the greatest power of two in the whole deck, which is also the last bottom card.</p>
<h3 id="generalizing-for-none-power-of-two">Generalizing for None Power of Two<a hidden class="anchor" aria-hidden="true" href="#generalizing-for-none-power-of-two">#</a></h3>
<p>Our solution for the generalized case is in fact an extension of the special case of deck&rsquo;s whose number is a power of two. Let&rsquo;s begin from where we ended up.</p>
<h4 id="a-deck-of-seven-cards">A Deck of Seven Cards<a hidden class="anchor" aria-hidden="true" href="#a-deck-of-seven-cards">#</a></h4>
<p>On <strong>First Iteration</strong>:</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td>x</td>
      </tr>
      <tr>
          <td>2</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>3</td>
          <td>x</td>
      </tr>
      <tr>
          <td>4</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>5</td>
          <td>x</td>
      </tr>
      <tr>
          <td>6</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>7</td>
          <td></td>
      </tr>
  </tbody>
</table>
<p>Note that I intentionally did not mark <em>card seven</em>. Otherwise, The second iteration would have the first card marked as <em>-&gt;</em>, violating consistency of marking among iterations. In case cards number is odd, as in this case, We prefer to avoid marking the last card, and get the second iteration as</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>7</td>
          <td>x</td>
      </tr>
      <tr>
          <td>2</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>4</td>
          <td>x</td>
      </tr>
      <tr>
          <td>6</td>
          <td>-&gt;</td>
      </tr>
  </tbody>
</table>
<p>We have got here cards of some power of two. Following our illustrated observation in the previous section, We could conclude the last remaining card is <em>card six</em>.</p>
<p>For eight cards deck, The second iteration was <em>&lt;2, 4, 6, 8&gt;</em>. Removing <em>card eight</em> from the deck resulted in having <em>card seven</em> as a remainder from the first iteration, and shifting <em>&lt;2, 4, 6, 8&gt;</em> one position to the right. As a result, We have <em>card six</em> as the last one in <em>second iteration</em></p>
<p>For eight cards deck, The last remaining card was <em>eight</em>. For seven cards deck, the last remaining card is <em>six</em>. Removing one card from the <em>eight cards deck</em> yielded the same remaining card but subtracted by two. In other words, $8 - 1$ cards deck yields the last remaining card <em>sevenCardsAnswer</em> = <em>eightCardsAnswer</em> - (2 * removedCards) = 8 - (2 * 1) = 6. Let&rsquo;s try more trials and see how they relate with the case of <em>eight cards deck</em></p>
<h4 id="a-deck-of-six-cards">A Deck of Six Cards<a hidden class="anchor" aria-hidden="true" href="#a-deck-of-six-cards">#</a></h4>
<p>On <strong>First Iteration</strong>:</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td>x</td>
      </tr>
      <tr>
          <td>2</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>3</td>
          <td>x</td>
      </tr>
      <tr>
          <td>4</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>5</td>
          <td>x</td>
      </tr>
      <tr>
          <td>6</td>
          <td>-&gt;</td>
      </tr>
  </tbody>
</table>
<p>On <strong>Second Iteration</strong>:</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>2</td>
          <td>x</td>
      </tr>
      <tr>
          <td>4</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>6</td>
          <td>x</td>
      </tr>
  </tbody>
</table>
<p>So, we end-up with <em>card four</em>. Again, $8 - 2$ cards deck yields the last remaining card <em>sixCardsAnswer</em> = <em>eightCardsAnswer</em> - (2 * removedCards) = 8 - (2 * 2) = 4. Here, unlike the case of <em>seven cards deck</em>, There is no remainder from the first iteration so that we end up with four cards in the second iteration. As two cards are removed from <em>eight cards deck</em>, we have three cards in second iteration rather than four. <em>card six</em> here is in an odd position, so it gets thrown away. The last remaining card is <em>card four</em>. In other words, It seems removing two cards from <em>eight cards deck</em> shifted our <em>&lt;2, 4, 6, 8&gt;</em> a position to the right in addition to removing the last card.</p>
<h4 id="a-deck-of-five-cards">A Deck of Five Cards<a hidden class="anchor" aria-hidden="true" href="#a-deck-of-five-cards">#</a></h4>
<p>On <strong>First Iteration</strong>:</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td>x</td>
      </tr>
      <tr>
          <td>2</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>3</td>
          <td>x</td>
      </tr>
      <tr>
          <td>4</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>5</td>
          <td></td>
      </tr>
  </tbody>
</table>
<p>As in the case of <em>seven cards deck</em>, We do not mark <em>card five</em> in the first iteration. Recall the the last card is not marked whenever we have an odd number of cards in an interation.</p>
<p>On <strong>Second Iteration</strong>:</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>5</td>
          <td>x</td>
      </tr>
      <tr>
          <td>2</td>
          <td>-&gt;</td>
      </tr>
      <tr>
          <td>4</td>
          <td>x</td>
      </tr>
  </tbody>
</table>
<p>Again, $8 - 3$ cards deck yields the last remaining card <em>fiveCardsAnswer</em> = <em>eightCardsAnswer</em> - (2 * removedCards) = 8 - (2 * 3) = 2. It seems removing two cards shifted <em>&lt;2, 4, 6, 8&gt;</em> on position to the right, and removing an additional card shifted it another position to the right but with a remainder, namely <em>card five</em>. So, we get <em>card two</em> as the answer.</p>
<h3 id="magical-formula">Magical Formula<a hidden class="anchor" aria-hidden="true" href="#magical-formula">#</a></h3>
<p>The illustrated reasoning <strong>SEEMS</strong> to work on not just $2^3 = 8$ but any power of two. For an arbitrary number of deck cards $n$, We find the power of two greater than or equal to $n$, Then compute the answer for $n$ by <em>nCardsAnswer</em> = <em>Power2CardsAnswer</em> - (2 * (Power2Cards - nCards)). So, How do find the power of two equal or greater than $n$? Here is a trick: $2^{ceil(log_2(n))}$. So, The final formula would be</p>
$$2^{ceil(log_2(n))} - (2 \times (2^{ceil(log_2(n))} - n)) = 2 \times (n-2^{ceil(log_2(n))-1})$$<h3 id="accepted-source-code-on-uva">Accepted Source Code on UVa<a hidden class="anchor" aria-hidden="true" href="#accepted-source-code-on-uva">#</a></h3>
<pre tabindex="0"><code>#include &amp;lt;cstdio&amp;gt;
#include &amp;lt;math.h&amp;gt;

using namespace std;

int main() {
  int n, res;

  scanf(&#34;%d&#34;, &amp;amp;n);

  res = 2*(n-pow(2, (ceil(log2(n))-1)));
  
  if (n == 1) printf(&#34;1\n&#34;);
  else printf(&#34;%d\n&#34;, res);
  
  return 0;
}
</code></pre>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://www.mostafatouny.github.io/">Mostafa Touny</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
