<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Lab 05 | Mostafa Touny</title>
<meta name="keywords" content="">
<meta name="description" content="$\newcommand{\nfrac}[2]{\frac{\displaystyle{#1}}{\displaystyle{#2}}}$
Exercises
5.1.3
Hints

you can use floors and ceils as subroutines.

Solution
(a)
    def divConqPower(a,n)
      if n = 1
        return a
      return divConqPower(a, floor(n/2)) * divConqPower(a, ceil(n/2))
(b)
Time of basic operations $T(n)$ are $T(n) = T( \lfloor n/2 \rfloor ) &#43; T( \lceil n/2 \rceil) &#43; 1$. Assuming $n = 2^k$, We get $T(n) = 2T(n/2) &#43; 1$. By master theorem,
$T(n) = \Theta(n)$.
For general cases of $n$, Observe $n = 2^{\log n} \leq 2^{\lceil \log n \rceil}$, So by master theorem $T(n) \leq \mathcal{O}(2^{\lceil \log n \rceil}) \leq \mathcal{O}(2^{\log n &#43; 1}) = \mathcal{O}(n)$. Similarly $T(n) \geq \Omega(2^{\lfloor \log n \rfloor}) = \Omega(n)$. That concludes $T(n) = \Theta(n)$ for any $n$.">
<meta name="author" content="">
<link rel="canonical" href="https://www.mostafatouny.github.io/msa-levitin-post/lab05/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e6ee52f0fc7c2e3dbd78858fc1b3e06fb86a3c6ee38d351342e06e23a24d02d6.css" integrity="sha256-5u5S8Px8Lj29eIWPwbPgb7hqPG7jjTUTQuBuI6JNAtY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.mostafatouny.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.mostafatouny.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.mostafatouny.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.mostafatouny.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.mostafatouny.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://www.mostafatouny.github.io/msa-levitin-post/lab05/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Lab 05" />
<meta property="og:description" content="$\newcommand{\nfrac}[2]{\frac{\displaystyle{#1}}{\displaystyle{#2}}}$
Exercises
5.1.3
Hints

you can use floors and ceils as subroutines.

Solution
(a)
    def divConqPower(a,n)
      if n = 1
        return a
      return divConqPower(a, floor(n/2)) * divConqPower(a, ceil(n/2))
(b)
Time of basic operations $T(n)$ are $T(n) = T( \lfloor n/2 \rfloor ) &#43; T( \lceil n/2 \rceil) &#43; 1$. Assuming $n = 2^k$, We get $T(n) = 2T(n/2) &#43; 1$. By master theorem,
$T(n) = \Theta(n)$.
For general cases of $n$, Observe $n = 2^{\log n} \leq 2^{\lceil \log n \rceil}$, So by master theorem $T(n) \leq \mathcal{O}(2^{\lceil \log n \rceil}) \leq \mathcal{O}(2^{\log n &#43; 1}) = \mathcal{O}(n)$. Similarly $T(n) \geq \Omega(2^{\lfloor \log n \rfloor}) = \Omega(n)$. That concludes $T(n) = \Theta(n)$ for any $n$." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.mostafatouny.github.io/msa-levitin-post/lab05/" /><meta property="article:section" content="msa-levitin-post" />
<meta property="article:published_time" content="2023-11-16T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-11-16T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Lab 05"/>
<meta name="twitter:description" content="$\newcommand{\nfrac}[2]{\frac{\displaystyle{#1}}{\displaystyle{#2}}}$
Exercises
5.1.3
Hints

you can use floors and ceils as subroutines.

Solution
(a)
    def divConqPower(a,n)
      if n = 1
        return a
      return divConqPower(a, floor(n/2)) * divConqPower(a, ceil(n/2))
(b)
Time of basic operations $T(n)$ are $T(n) = T( \lfloor n/2 \rfloor ) &#43; T( \lceil n/2 \rceil) &#43; 1$. Assuming $n = 2^k$, We get $T(n) = 2T(n/2) &#43; 1$. By master theorem,
$T(n) = \Theta(n)$.
For general cases of $n$, Observe $n = 2^{\log n} \leq 2^{\lceil \log n \rceil}$, So by master theorem $T(n) \leq \mathcal{O}(2^{\lceil \log n \rceil}) \leq \mathcal{O}(2^{\log n &#43; 1}) = \mathcal{O}(n)$. Similarly $T(n) \geq \Omega(2^{\lfloor \log n \rfloor}) = \Omega(n)$. That concludes $T(n) = \Theta(n)$ for any $n$."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Levitin's Algorithms",
      "item": "https://www.mostafatouny.github.io/msa-levitin-post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Lab 05",
      "item": "https://www.mostafatouny.github.io/msa-levitin-post/lab05/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Lab 05",
  "name": "Lab 05",
  "description": "$\\newcommand{\\nfrac}[2]{\\frac{\\displaystyle{#1}}{\\displaystyle{#2}}}$\nExercises 5.1.3 Hints\nyou can use floors and ceils as subroutines. Solution\n(a)\ndef divConqPower(a,n) if n = 1 return a return divConqPower(a, floor(n/2)) * divConqPower(a, ceil(n/2)) (b)\nTime of basic operations $T(n)$ are $T(n) = T( \\lfloor n/2 \\rfloor ) + T( \\lceil n/2 \\rceil) + 1$. Assuming $n = 2^k$, We get $T(n) = 2T(n/2) + 1$. By master theorem, $T(n) = \\Theta(n)$.\nFor general cases of $n$, Observe $n = 2^{\\log n} \\leq 2^{\\lceil \\log n \\rceil}$, So by master theorem $T(n) \\leq \\mathcal{O}(2^{\\lceil \\log n \\rceil}) \\leq \\mathcal{O}(2^{\\log n + 1}) = \\mathcal{O}(n)$. Similarly $T(n) \\geq \\Omega(2^{\\lfloor \\log n \\rfloor}) = \\Omega(n)$. That concludes $T(n) = \\Theta(n)$ for any $n$.\n",
  "keywords": [
    
  ],
  "articleBody": "$\\newcommand{\\nfrac}[2]{\\frac{\\displaystyle{#1}}{\\displaystyle{#2}}}$\nExercises 5.1.3 Hints\nyou can use floors and ceils as subroutines. Solution\n(a)\ndef divConqPower(a,n) if n = 1 return a return divConqPower(a, floor(n/2)) * divConqPower(a, ceil(n/2)) (b)\nTime of basic operations $T(n)$ are $T(n) = T( \\lfloor n/2 \\rfloor ) + T( \\lceil n/2 \\rceil) + 1$. Assuming $n = 2^k$, We get $T(n) = 2T(n/2) + 1$. By master theorem, $T(n) = \\Theta(n)$.\nFor general cases of $n$, Observe $n = 2^{\\log n} \\leq 2^{\\lceil \\log n \\rceil}$, So by master theorem $T(n) \\leq \\mathcal{O}(2^{\\lceil \\log n \\rceil}) \\leq \\mathcal{O}(2^{\\log n + 1}) = \\mathcal{O}(n)$. Similarly $T(n) \\geq \\Omega(2^{\\lfloor \\log n \\rfloor}) = \\Omega(n)$. That concludes $T(n) = \\Theta(n)$ for any $n$.\nComplexity proof by substitution. Recurrence is \\begin{aligned} T(1) \u0026= 0 \\\\ T(n) \u0026= 2T(n/2) + 1 \\end{aligned} It follows \\begin{aligned} T(n) \u0026= 2T(n/2) + 1 \\\\ \u0026= 2^2 T(n/2^2) + 2^1 + 2^0 \\\\ \u0026= 2^3 T(n/2^3) + 2^2 + 2^1 + 2^0 \\\\ \u0026= 2^k T(n/2^k) + 2^{k-1} + \\dots + 2^0 \\\\ \u0026= 2^{\\log n} T(n/2^{\\log n}) + 2^{(\\log n) - 1} + \\dots + 2^0 \\\\ \u0026= 2^{\\log n} T(1) + 2^{(\\log n) - 1} + \\dots + 2^0 \\\\ \u0026= 2^{(\\log n) - 1} + \\dots + 2^0 \\\\ \u0026= 2^{\\log n } - 1 = n - 1 = \\Theta(n) \\end{aligned}\nP.S. Generally speaking we can ignore floors and ceilings in asymptotic notation (see page 885 in MIT’s Math for CS).\n(c). Homework\n5.1.10 Homework\n5.2.8 Homework Consider pivot to be zero.\n5.2.9 Homework\n5.3.1 Hints\nRecall in a binary tree, a node has at most two leaves. Apply the strategy on them Given the height of subtrees, What can you conclude about height of the main tree? What is subtrees have different heights? Solution\nSame as solution manual:\nAnalysis. We know each node is going to count 1 operation. If we assumed total number of nodes to be $n$, then $T(n) = \\Theta(n)$. If we assumed like the book the total number of internal nodes to be $n$ and leaves to be $x$, then $x + n = 2n$, so $T(n) = \\Theta(n)$.\nP.S. The book considers checking whether tree is empty to be the basic operation. My intuition tells me it is the max operation.\n5.3.2 Hints\nConsider the problem size to be level of a node, not number of nodes. Consider the base case as the tree being a single node (leaf). Assume you can query the tree’s root, and its children. Recall a binary tree has at most two children for each node. Given counts of both, what can we conclude? Solution\nCommentary on the given algorithm in the question. It is flawed. Given the solution of an empty tree, we reach a flawed claim about the tree of size 1 node. Remarkably we shouldn’t consider problem size to be the number of nodes, but rather the height.\nCorrect algorithms:\n# input: tree T with access to its root # output: count of leaves def leafCounter (Tree T) # base case: the tree is empty if T is empty return 0 # base case: the tree is a leaf node if T.root.children == [] return 1 # recursive step return leafCounter(T_left) + leafCounter(T_right) Analysis. We count one summation operation for each non-leaf node. Following the notation given in the book, $n$ as number of non-leaf nodes and $x$ as leaves, We get $T(n) = n$.\nAlternatively we can consider $n$ to be total number of nodes. But we know $n = 2i+1$ where $i$ is number of non-leaf nodes. So $T(n) \\approx n/2 = \\Theta(n)$.\n5.4.3 Homework Proving exponent rules is not germane to the course.\n5.4.8 Homework Uses geometric series.\n5.5.1 Hints\nAmong pairs of right and left subsets, What are the least-distance ones? Use the given sorted property to deduce the least-distance pair. Solution\nLike the solution manual.\n5.5.9 Homework\n",
  "wordCount" : "646",
  "inLanguage": "en",
  "datePublished": "2023-11-16T00:00:00Z",
  "dateModified": "2023-11-16T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.mostafatouny.github.io/msa-levitin-post/lab05/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Mostafa Touny",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.mostafatouny.github.io/favicon.ico"
    }
  }
}
</script>

    
    
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [ ['$$', '$$'], ['\\[', '\\]'] ],  
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ]      
    }
  };
</script>

    
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.mostafatouny.github.io/" accesskey="h" title="Mostafa Touny (Alt + H)">Mostafa Touny</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.mostafatouny.github.io/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://www.mostafatouny.github.io/post" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Lab 05
    </h1>
    <div class="post-meta"><span title='2023-11-16 00:00:00 +0000 UTC'>November 16, 2023</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#exercises" aria-label="Exercises">Exercises</a><ul>
                        
                <li>
                    <a href="#section" aria-label="5.1.3">5.1.3</a></li>
                <li>
                    <a href="#section-1" aria-label="5.1.10">5.1.10</a></li>
                <li>
                    <a href="#section-2" aria-label="5.2.8">5.2.8</a></li>
                <li>
                    <a href="#section-3" aria-label="5.2.9">5.2.9</a></li>
                <li>
                    <a href="#section-4" aria-label="5.3.1">5.3.1</a></li>
                <li>
                    <a href="#section-5" aria-label="5.3.2">5.3.2</a></li>
                <li>
                    <a href="#section-6" aria-label="5.4.3">5.4.3</a></li>
                <li>
                    <a href="#section-7" aria-label="5.4.8">5.4.8</a></li>
                <li>
                    <a href="#section-8" aria-label="5.5.1">5.5.1</a></li>
                <li>
                    <a href="#section-9" aria-label="5.5.9">5.5.9</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>$\newcommand{\nfrac}[2]{\frac{\displaystyle{#1}}{\displaystyle{#2}}}$</p>
<h2 id="exercises" class="unnumbered">Exercises<a hidden class="anchor" aria-hidden="true" href="#exercises">#</a></h2>
<h3 id="section" class="unnumbered">5.1.3<a hidden class="anchor" aria-hidden="true" href="#section">#</a></h3>
<p><em>Hints</em></p>
<ul>
<li>you can use floors and ceils as subroutines.</li>
</ul>
<p><em>Solution</em></p>
<p><strong>(a)</strong></p>
<pre tabindex="0"><code>    def divConqPower(a,n)
      if n = 1
        return a
      return divConqPower(a, floor(n/2)) * divConqPower(a, ceil(n/2))
</code></pre><p><strong>(b)</strong></p>
<p>Time of basic operations $T(n)$ are $T(n) = T( \lfloor n/2 \rfloor ) + T( \lceil n/2 \rceil) + 1$. Assuming $n = 2^k$, We get $T(n) = 2T(n/2) + 1$. By master theorem,
$T(n) = \Theta(n)$.</p>
<p>For general cases of $n$, Observe $n = 2^{\log n} \leq 2^{\lceil \log n \rceil}$, So by master theorem $T(n) \leq \mathcal{O}(2^{\lceil \log n \rceil}) \leq \mathcal{O}(2^{\log n + 1}) = \mathcal{O}(n)$. Similarly $T(n) \geq \Omega(2^{\lfloor \log n \rfloor}) = \Omega(n)$. That concludes $T(n) = \Theta(n)$ for any $n$.</p>
<p>Complexity proof by substitution. Recurrence is
\begin{aligned}
T(1) &amp;= 0 \\
T(n) &amp;= 2T(n/2) + 1
\end{aligned}
It follows
\begin{aligned}
T(n) &amp;= 2T(n/2) + 1 \\
&amp;= 2^2 T(n/2^2) + 2^1 + 2^0 \\
&amp;= 2^3 T(n/2^3) + 2^2 + 2^1 + 2^0 \\
&amp;= 2^k T(n/2^k) + 2^{k-1} + \dots + 2^0 \\
&amp;= 2^{\log n} T(n/2^{\log n}) + 2^{(\log n) - 1} + \dots + 2^0 \\
&amp;= 2^{\log n} T(1) + 2^{(\log n) - 1} + \dots + 2^0 \\
&amp;= 2^{(\log n) - 1} + \dots + 2^0 \\
&amp;= 2^{\log n } - 1 = n - 1 = \Theta(n)
\end{aligned}</p>
<p>P.S. Generally speaking we can ignore floors and ceilings in asymptotic notation (see page 885 in MIT&rsquo;s Math for CS).</p>
<p><strong>(c). Homework</strong></p>
<h3 id="section-1" class="unnumbered">5.1.10<a hidden class="anchor" aria-hidden="true" href="#section-1">#</a></h3>
<p><strong>Homework</strong></p>
<h3 id="section-2" class="unnumbered">5.2.8<a hidden class="anchor" aria-hidden="true" href="#section-2">#</a></h3>
<p><strong>Homework</strong> Consider pivot to be zero.</p>
<h3 id="section-3" class="unnumbered">5.2.9<a hidden class="anchor" aria-hidden="true" href="#section-3">#</a></h3>
<p><strong>Homework</strong></p>
<h3 id="section-4" class="unnumbered">5.3.1<a hidden class="anchor" aria-hidden="true" href="#section-4">#</a></h3>
<p><em>Hints</em></p>
<ul>
<li>Recall in a binary tree, a node has at most two leaves. Apply the strategy on them</li>
<li>Given the height of subtrees, What can you conclude about height of the main tree?</li>
<li>What is subtrees have different heights?</li>
</ul>
<p><em>Solution</em></p>
<p>Same as solution manual:</p>
<p><img loading="lazy" src="./ex-5.3.1.jpg" alt="image"  />
</p>
<p>Analysis. We know each node is going to count 1 operation. If we assumed total number of nodes to be $n$, then $T(n) = \Theta(n)$. If we assumed like the book the total number of internal nodes to be $n$ and leaves to be $x$, then $x + n = 2n$, so $T(n) = \Theta(n)$.</p>
<p>P.S. The book considers checking whether tree is empty to be the basic operation. My intuition tells me it is the max operation.</p>
<h3 id="section-5" class="unnumbered">5.3.2<a hidden class="anchor" aria-hidden="true" href="#section-5">#</a></h3>
<p><em>Hints</em></p>
<ul>
<li>Consider the problem size to be level of a node, not number of nodes.</li>
<li>Consider the base case as the tree being a single node (leaf).</li>
<li>Assume you can query the tree&rsquo;s root, and its children.</li>
<li>Recall a binary tree has at most two children for each node. Given counts of both, what can we conclude?</li>
</ul>
<p><em>Solution</em></p>
<p>Commentary on the given algorithm in the question. It is flawed. Given the solution of an empty tree, we reach a flawed claim about the tree of size 1 node. Remarkably we shouldn&rsquo;t consider problem size to be the number of nodes, but rather the height.</p>
<p>Correct algorithms:</p>
<pre tabindex="0"><code>    # input: tree T with access to its root
    # output: count of leaves
    def leafCounter (Tree T)
      # base case: the tree is empty
      if T is empty
        return 0

      # base case: the tree is a leaf node
      if T.root.children == []
        return 1
      
      # recursive step
      return leafCounter(T_left) + leafCounter(T_right)
</code></pre><p>Analysis. We count one summation operation for each non-leaf node. Following the notation given in the book, $n$ as number of non-leaf nodes and $x$ as leaves, We get $T(n) = n$.</p>
<p>Alternatively we can consider $n$ to be total number of nodes. But we know $n = 2i+1$ where $i$ is number of non-leaf nodes. So $T(n) \approx n/2 = \Theta(n)$.</p>
<h3 id="section-6" class="unnumbered">5.4.3<a hidden class="anchor" aria-hidden="true" href="#section-6">#</a></h3>
<p><strong>Homework</strong> Proving exponent rules is not germane to the course.</p>
<h3 id="section-7" class="unnumbered">5.4.8<a hidden class="anchor" aria-hidden="true" href="#section-7">#</a></h3>
<p><strong>Homework</strong> Uses geometric series.</p>
<h3 id="section-8" class="unnumbered">5.5.1<a hidden class="anchor" aria-hidden="true" href="#section-8">#</a></h3>
<p><em>Hints</em></p>
<ul>
<li>Among pairs of right and left subsets, What are the least-distance ones?</li>
<li>Use the given sorted property to deduce the least-distance pair.</li>
</ul>
<p><em>Solution</em></p>
<p>Like the solution manual.</p>
<p><img loading="lazy" src="./ex-5.5.1.png" alt="image"  />
</p>
<h3 id="section-9" class="unnumbered">5.5.9<a hidden class="anchor" aria-hidden="true" href="#section-9">#</a></h3>
<p><strong>Homework</strong></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://www.mostafatouny.github.io/">Mostafa Touny</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
